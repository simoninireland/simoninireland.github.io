<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simon Dobson (old posts, page 44)</title>
<style>
	@font-face {
	    font-family: "libretto-icons";
	    src:url(../assets/fonts/libretto-icons.eot);
	    src:url(../assets/fonts/libretto-icons.eot#iefix) format("embedded-opentype"),
	    url(../assets/fonts/libretto-icons.woff) format("woff"),
	    url(../assets/fonts/libretto-icons.ttf) format("truetype"),
	    url(../assets/fonts/libretto-icons.svg#libretto-icons) format("svg");
	    font-weight: normal;
	    font-style: normal;
	}
    </style>
<link rel="icon" href="../images/favicon.png" sizes="16x16">
<link rel="alternate" type="application/rss+xml" href="../rss.xml">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono|Libre+Baskerville|Montserrat|Playfair+Display|Tangerine">
<link rel="stylesheet" href="../assets/css/libretto_styles.css">
<link rel="stylesheet" href="../assets/css/baguetteBox.min.css">
<link rel="stylesheet" href="../assets/css/code.css">
<link rel="stylesheet" href="../assets/css/nikola_rst.css">
<link rel="stylesheet" href="../assets/css/nikola_ipython.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
</head>
<body>
    <!-- Navigation bar -->
    <header class="nav-bar"><div class="site-branding">
	    <h1 class="site-title">
		<a href="https://simondobson.org/" title="Simon Dobson" rel="home">Simon&nbsp;Dobson</a>
	    </h1>
	</div>
	<nav class="site-navigation" role="navigation"><div class="menu-toggle">
		<span class="mobile-site-title">Simon Dobson</span>
	    </div>
	    <ul class="menu">
<li><a href="../index.html">Home</a></li>
		    <li><a href="../personal/">About&nbsp;me</a></li>
		    <li><a href="../research/">Research</a></li>
		    <li><a href="../development/projects/">Software</a></li>
		    <li><a href="../writing/">Writing</a></li>
		    <li><a href="../personal/contact/">Contact</a></li>
		<li>
<a href="../rss.xml"><i class="fa fa-rss"></i></a>
	    </li>
</ul></nav></header><div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../goodreads/mussolini/" rel="bookmark">Wednesday 10 July, 2013</a>
			</span>
		    </div>
		    <h1><a href="../goodreads/mussolini/">Mussolini</a></h1>
		</div>
		<div class="entry-content">
			<div>
    <div>
      <img src="https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1315695027l/9462315._SX98_.jpg" style="float: left; margin-right: 10px"><h2>
	Richard <span class="caps">J.B.</span> Bosworth&nbsp;(2002)
      </h2>
    </div>
    <p>
      I&#8217;ve wanted to read a biography of Mussolini for a while, and this one is very good. A reviewer quote on the cover describes it as &#8220;lucid, elegant, and a pleasure to read,&#8221; and I&#8217;d have to agree. It&#8217;s somewhat more &#8220;literary&#8221; than some biographies, and as a result doesn&#8217;t always cover the historical context as well as one might like: the author&#8217;s description of the March on Rome, for example, is extremely brief despite it&#8217;s significance for Mussolini&#8217;s rise. In this way it&#8217;s not like many Hitler biographies (for example <a href="https://www.goodreads.com/book/show/355434.Hitler" title="Hitler by Joachim Fest" rel="nofollow noopener">Hitler</a> or <a href="https://www.goodreads.com/book/show/782319.Hitler_and_Stalin_Parallel_Lives" title="Hitler and Stalin Parallel Lives by Alan Bullock" rel="nofollow noopener">Hitler and Stalin: Parallel Lives</a>) which are as much about events as personality. One also has to get past the author&#8217;s repetition of words like &#8220;euphonious&#8221; and &#8220;lucubrations&#8221;, which get tiresome after a while. Having said all that, this is an excellent biography, full of insight and pointers to other sources (with over 80 pages of footnotes), and is a good overview to the career of someone often written off too&nbsp;quickly.
      </p>
<p>
	4/5.
	  Finished Wednesday 10 July,&nbsp;2013.
	</p>
<p>
	  (Originally published on <a href="https://www.goodreads.com/review/show/630146008?utm_medium=api&amp;utm_source=rss">Goodreads</a>.)
  </p>
</div>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2013/07/09/temperature-sensors-working/" rel="bookmark">Tuesday 9 July, 2013</a>
			</span>
		    </div>
		    <h1><a href="../2013/07/09/temperature-sensors-working/">Temperature sensors&nbsp;working</a></h1>
		</div>
		<div class="entry-content">
			<p>Temperature sensing using digital temperature sensors is easy to get&nbsp;working.</p>
<!--more-->

<p>The temperature sensing part of the project requires three sensors for ambient, high-up and low-down measurement. The <a href="../2013/07/08/ds18b20/"><span class="caps">DS18B20</span> temperature sensor </a>seems well-suited for the&nbsp;job.</p>
<p><img alt="DS18B20" src="../images/citizen-sensing/three-ds18b20.png"></p>
<p>Three <span class="caps">DS18B20</span> temperature sensors sharing a OneWire bus, standard (rail) power&nbsp;mode</p>
<p>Hooking-up a OneWire bus for the three sensors lets them share a single microcontroller pin &#8212; which isn&#8217;t important for hardware reasons in this project, but also saves some microcontroller <span class="caps">RAM</span>, which might be. The circuit is very simple, with the three sensors sharing power and ground lines and with a common data line pulled-up to the power rail through a 4.7K resistor. The <span class="caps">DQ</span> line is attached to one of the Arduino&#8217;s digital lines. The OneWire library is then used to instantiate a protocol handler for that line, and passed to the temperature control library to manage the interaction with the devices, including their conversion from raw to &#8220;real&#8221; temperature&nbsp;values.</p>
<p>The resulting code is almost comically&nbsp;simple:</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;DallasTemperature.h&gt;</span>

<span class="n">OneWire</span><span class="w"> </span><span class="nf">onewire</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span><span class="w">                  </span><span class="c1">// OneWire bus on pin 8</span>
<span class="n">DallasTemperature</span><span class="w"> </span><span class="nf">sensors</span><span class="p">(</span><span class="o">&amp;</span><span class="n">onewire</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="w">  </span><span class="n">sensors</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">sensors</span><span class="p">.</span><span class="n">requestTemperatures</span><span class="p">();</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sensors</span><span class="p">.</span><span class="n">getTempCByIndex</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Sensor "</span><span class="p">);</span><span class="w">   </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w">   </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" = "</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w">   </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"C"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>That&#8217;s it! The temperature library packages everything up nicely, including the conversion and the interaction with the OneWire protocol (which is quite&nbsp;fiddly).</p>
<p><img alt="Three DS18B30s on a prototyping shield" src="../images/citizen-sensing/ds18b20-prototype.jpg"></p>
<p>One potential problem for the future is that access to the sensors is by index, not by any particular identifier, and it;s not clear whether the ordering is always the same: does the sensor closest to the microcontroller always appear as index 0, for example? If not, then we&#8217;ll have to identify which sensor is which somehow to sample the temperature from the correct place, or run each one on a different OneWire bus&nbsp;instance.</p>
<p>There&#8217;s also an interesting point about parasite power mode, which is where the <span class="caps">DS18B20</span> draws its power from the data bus rather than from a dedicated power rail. This might make power management easier, since the sensor would be unpowered when not being used, such as when the Arduino is asleep. This suggests it&#8217;s probably worth looking into parasite power a bit&nbsp;more.</p>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2013/07/08/ds18b20/" rel="bookmark">Monday 8 July, 2013</a>
			</span>
		    </div>
		    <h1><a href="../2013/07/08/ds18b20/"><span class="caps">DS18B20</span> digital&nbsp;thermometer</a></h1>
		</div>
		<div class="entry-content">
			<p>The <span class="caps">DS18B20</span> is a programmable digital thermometer that needs no calibration and uses only one wire of the&nbsp;microcontroller.</p>
<!--more-->

<p>The <a href="http://www.maximintegrated.com/datasheet/index.mvp/id/2812" target="_blank"><span class="caps">DS18B20</span></a> is extremely popular as a temperature sensor, for obvious reasons: they&#8217;re digital, and require no calibration, in contrast to using a thermistor or similar analogue device which would need to be characterised against reference temperatures. They&#8217;re not as cheap as analogue components, but their simplicity of use and accuracy probably make up for that in scientific&nbsp;applications.</p>
<p>The devices are also notable as using the OneWire protocol developed by Dallas Semiconductor (now Maxim) and used in (amongst other devices) their <a href="http://www.maximintegrated.com/products/ibutton/" target="_blank">iButton</a> devices. Essentially <a href="https://en.wikipedia.org/wiki/1-Wire" target="_blank">OneWire</a> is an embedded systems equivalent of <span class="caps">USB</span> that allows a set of devices to be chained together and addressed using only one pin on a microcontroller. This means that there&#8217;s no real limit on the number of sensors that even a small chip can make use of. The <a href="http://datasheets.maximintegrated.com/en/ds/DS18B20.pdf" target="_blank">datasheet</a> is available if needed, but they&#8217;re so easy to use and have such good software support (see below) that there&#8217;s no real need to refer to&nbsp;it.</p>
<p>The sensors are packaged almost like transistors, with three wires for ground, power, and data. The easiest way to use them is to power them directly with 5V and ground, and use the third wire for communications. (There&#8217;s also a &#8220;parasitic&#8221; mode that takes power from the data bus, which I haven&#8217;t got to work yet.) The communications line is the &#8220;one wire&#8221; that runs the communications&nbsp;protocol.</p>
<p>Using OneWire devices, and DS18B20s in particular, is made very simple by the existence of two libraries, providing the <a href="http://www.pjrc.com/teensy/td_libs_OneWire.html" target="_blank">protocol driver</a> and <a href="http://milesburton.com/Dallas_Temperature_Control_Library" target="_blank">temperature conversion and packaging</a> respectively. Links and installation instructions can be found on the <a href="../download/tools-libraries/">3rd-part tools and libraries page</a>.</p>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2013/07/06/api-communications/" rel="bookmark">Saturday 6 July, 2013</a>
			</span>
		    </div>
		    <h1><a href="../2013/07/06/api-communications/"><span class="caps">API</span> communications now&nbsp;working</a></h1>
		</div>
		<div class="entry-content">
			<p>A small sensor network now working, with two edge devices talking to a base&nbsp;station.</p>
<!--more-->

<p><img alt="Network" src="../images/citizen-sensing/network.jpg"></p>
<p>This step of the project accomplishes two things: is gets <span class="caps">API</span> networking mode working for the XBee radios, and makes sure the the interaction between software on the Arduinos and software running on the base station work&nbsp;too.</p>
<p>The data stream is simple enough: each Arduino counts up from 0 to 255 every 5s, passing the result up to the co-ordinator radio. A Processing program on the laptop collects the numbers and prints them. Naturally they become somewhat intertwined as their clocks aren&#8217;t quite&nbsp;synchronised.</p>
<p>Actually this is enough to perform a simple radio survey to check transmission distance: we can move the radios away from the base station until they lose contact (nominally 100m for these 2mW radios, in reality probably substantially less), then move back into range, and then move one of the radios again to check that it meshes with the intermediate node in reaching back to the base station. This will also check that battery power&nbsp;works.</p>
<p><img alt="Meshing" src="../images/citizen-sensing/processing-xbee-api.png"></p>
<p>The software is quite straightforward, and the <a href="../2013/07/03/xbee-arduino/">xbee-arduino library</a> handles all the low-level communications &#8212; although it&#8217;s very low-level, fine for the experienced programmer but probably all but mystifying to anyone not used to this kind of software. The corresponding Java xbee-api library is slightly more friendly, but <em>only</em> slightly: they probably both need wrapping into a framework that hides the radio&nbsp;nastiness.</p>
<p>I think the biggest hurdle for this sort of system is the data format &#8212; or, more precisely, the need (or desire, at least) to to use C at one end and Processing/Java at the other, which means that the data on the wire is being described twice. A framework approach could use (for example) <a href="http://www.json.org/" target="_blank"><span class="caps">JSON</span></a>, although there&#8217;d still be a need to make sure it was compactly encoded and&nbsp;transmitted.</p>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2013/07/03/xbee-arduino/" rel="bookmark">Wednesday 3 July, 2013</a>
			</span>
		    </div>
		    <h1><a href="../2013/07/03/xbee-arduino/">The xbee-arduino&nbsp;library</a></h1>
		</div>
		<div class="entry-content">
			<p>A library for using XBee radios with&nbsp;Arduinos.</p>
<!--more-->

<p>The XBee radio operates in <a href="../2013/07/01/xbee/" target="_blank">two modes</a>: transparent or text-based, and <span class="caps">API</span> or binary-based. The latter (<span class="caps">API</span> mode) is generally considered more suitable for computer-to-computer interactions, as it&#8217;s faster and simpler for computers to manipulate. However, using an XBee in this mode requires additional&nbsp;software.</p>
<p>The <a href="https://code.google.com/p/xbee-arduino/" target="_blank">xbee-arduino library</a> provides Arduino functions to access the <span class="caps">API</span> mode functionality of the various XBee radio modules. The library is quite low-level, but does provide access to all the necessary functions like issuing <span class="caps">AT</span> commands to control the modem and sensing and receiving packets of data to other radios in the mesh&nbsp;network.</p>
<p>To use the library you download the latest version from the web page and unpack it into the <tt>libraries/</tt> directory of your Arduino <span class="caps">IDE</span>. You also need to make sure that the radios you use have the <a href="../2013/07/02/xctu/" target="_blank"><span class="caps">API</span> function set installed using X-<span class="caps">CTU</span></a>, as the library only makes sense for radios in <span class="caps">API</span> mode. You also have to set the &#8220;<span class="caps">AP</span>&#8221; parameter to 2 when writing the&nbsp;firmware.</p>
		</div>
	    </article>
</div>
    <!-- Lower Navigation links -->
    <nav class="site-content navigation-post" role="navigation"><div class="previous">
		<a href="index-43.html" rel="prev">
		    <span class="meta-nav">Older Entries</span>		</a>
	    </div>
	    <div class="next">
		<a href="index-45.html" rel="next">
		    <span class="meta-nav">Newer Entries</span>		</a>
	    </div>
    </nav><!-- Page Footer --><section class="footer-sidebar clear" role="complementary"><div class="widget-block">
	    <aside class="widget"><h2 class="widget-title">Simon&nbsp;Dobson</h2>
		<div class="widget-text">Aut tace aut loquere meliora silentio</div>
	    </aside>
</div>
    </section><!-- Extra JavaScript --><!-- Site Attributions --><footer class="site-footer" role="contentinfo"><div class="site-info">
	    <p></p>
	    <p>
	      Built with free and open-source software.
	      Powered by <a href="https://getnikola.com/">Nikola</a> using a theme based on
	      <a href="https://themes.getnikola.com/v7/libretto/">Libretto</a>.
	    </p>
	    <p>
	      All content Copyright © 2010–2025 Simon Dobson and licensed under
	      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="caps">CC</span>-<span class="caps">BY</span>-<span class="caps">NC</span>-<span class="caps">SA</span>-4.0</a>
	      unless otherwise&nbsp;noted.
	    </p>
	</div>
	<div class="social">
	    <ul class="menu"></ul>
</div>
    </footer>
</body>
</html>