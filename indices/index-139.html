<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simon Dobson (old posts, page 139)</title>
<style>
	@font-face {
	    font-family: "libretto-icons";
	    src:url(../assets/fonts/libretto-icons.eot);
	    src:url(../assets/fonts/libretto-icons.eot#iefix) format("embedded-opentype"),
	    url(../assets/fonts/libretto-icons.woff) format("woff"),
	    url(../assets/fonts/libretto-icons.ttf) format("truetype"),
	    url(../assets/fonts/libretto-icons.svg#libretto-icons) format("svg");
	    font-weight: normal;
	    font-style: normal;
	}
    </style>
<link rel="icon" href="../images/favicon.png" sizes="16x16">
<link rel="alternate" type="application/rss+xml" href="../rss.xml">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono%7CLibre+Baskerville%7CMontserrat%7CPlayfair+Display%7CTangerine">
<link rel="stylesheet" href="../assets/css/libretto_styles.css">
<link rel="stylesheet" href="../assets/css/baguetteBox.min.css">
<link rel="stylesheet" href="../assets/css/code.css">
<link rel="stylesheet" href="../assets/css/nikola_rst.css">
<link rel="stylesheet" href="../assets/css/nikola_ipython.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
</head>
<body>
    <!-- Navigation bar -->
    <header class="nav-bar"><div class="site-branding">
	    <h1 class="site-title">
		<a href="https://simondobson.org/" title="Simon Dobson" rel="home">Simon&nbsp;Dobson</a>
	    </h1>
	</div>
	<nav class="site-navigation" role="navigation"><div class="menu-toggle">
		<span class="mobile-site-title">Simon Dobson</span>
	    </div>
	    <ul class="menu">
<li><a href="../index.html">Home</a></li>
		    <li><a href="../personal/">About&nbsp;me</a></li>
		    <li><a href="../research/">Research</a></li>
		    <li><a href="../development/projects/">Software</a></li>
		    <li><a href="../writing/">Writing</a></li>
		    <li><a href="../personal/contact/">Contact</a></li>
		<li>
<a href="../rss.xml"><i class="fa fa-rss"></i></a>
	    </li>
</ul></nav></header><div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2024/03/06/anatomy-of-lisp/" rel="bookmark">Wednesday 6 March, 2024</a>
			</span>
		    </div>
		    <h1><a href="../2024/03/06/anatomy-of-lisp/">Anatomy of&nbsp;Lisp</a></h1>
		</div>
		<div class="entry-content">
			<div id="outline-container-orgc511952" class="outline-2">
<h2 id="orgc511952">Anatomy of&nbsp;Lisp</h2>
<div class="outline-text-2" id="text-orgc511952">
<p>
John Allen.  <a href="https://dl.acm.org/doi/book/10.5555/542865"><i>Anatomy of Lisp</i></a>. McGraw-Hill. <span class="caps">ISBN</span>
0-07-001115-X.&nbsp;1978.
</p>

<p>
This is a hard book to characterise. It&#8217;s simultaneously an
introduction, a collection of advanced (for the time) programming
techniques, and a guide to some very low-level implementation
details. It contains a lot of the usual introductory material, but
then delves into different representational choices for the basic
data structures – lists, but also arrays and hash tables as well
as Lisp code itself – and for the frames needed to represent
function calls. It the tackles interpretation <i>versus</i>
compilation, and even topics such as cross-compilation and
just-in-time or memoised&nbsp;compilation.
</p>

<p>
It&#8217;s impossible to read this book without thinking of <a href="/2024/01/27/structure-and-interpretation-of-computer-programs/"><span class="caps">SICP</span></a>, and
indeed I think in many ways it&#8217;s a direct precursor. (It&#8217;s
referenced a couple of times in <span class="caps">SICP</span>.) It has that same
combination of high-level, semantics-driven programming combined
with descriptions of underlying mechanisms. Where I think it
mainly differs is that it mixes representations, using a more
semantics-driven notation and explicit assembler instructions
rather than sticking with Lisp variants for <i>everything</i>. It&#8217;s
only when you see the two approaches side by side that you realise
how <i>clear</i> Lisp can be in radically different&nbsp;contexts..
</p>

<p>
Another important book was published in 1978: Kernighan and
Ritchie&#8217;s <i><a href="https://en.wikipedia.org/wiki/The_C_Programming_Language">The C programming language</a></i>. The two books share a
certain low-level focus, but come to very different conclusions
about the correct approach to dynamic storage, as the following
footnote by Allen (slightly edited for clarity)&nbsp;illustrates:
</p>

<blockquote>
<p>
Experiments have been performed in which Lisp programmers were
allowed to return &#8220;garbage&#8221; to the free-space list themselves. The
results were disastrous: list structure thought to be garbage was
returned to the free-space list even though the structure was
still being used by other&nbsp;computations.
</p>
</blockquote>

<p>
C, of course, accepts this &#8220;disaster&#8221; as a natural consequence of
manual allocation management. It encapsulates the different
attitudes of the two contemporary language communities, though:
one wanting a machine in which to think (and willing to use
computing power to simplify tasks), and those wanting raw
performance from limited hardware (and willing to complicate the
programming task to get&nbsp;it).
</p>

<p>
Overall, Allen&#8217;s book is a great attempt at an end-to-end
discussion of Lisp all the way down to the metal. Many of the
techniques are still relevant, at least as exemplars against
later, more efficient, techniques should be&nbsp;judged.
</p>

<p>
(Thanks to <a href="https://mcjones.org/paul/">Paul McJones</a> for pointing me to the free <span class="caps">PDF</span> of the book,
which he was responsible for developing. See <a href="https://mcjones.org/dustydecks/archives/2024/04/11/1249/">this post</a> for a history
of how this came&nbsp;about.)
</p>
</div>
</div>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2024/03/04/til-web-site-carbon-ratings/" rel="bookmark">Monday 4 March, 2024</a>
			</span>
		    </div>
		    <h1><a href="../2024/03/04/til-web-site-carbon-ratings/"><span class="caps">TIL</span>: Web site carbon&nbsp;ratings</a></h1>
		</div>
		<div class="entry-content">
			<div id="outline-container-orgd3ce558" class="outline-2">
<h2 id="orgd3ce558"><span class="caps">TIL</span>: Web site carbon&nbsp;ratings</h2>
<div class="outline-text-2" id="text-orgd3ce558">
<p>
Today I learned about a site that rates web pages according to their
carbon&nbsp;footprints.
</p>

<p>
My web site does&nbsp;well:
</p>

<p>
<img src="../attachments/16/f4bcd8-963e-40ce-9f63-be78ec585965/rating-simondobson-org.png" alt="nil"></p>

<p>
I&#8217;m not all that surprised by this, since I <a href="/development/this-site/">use</a> a static site
generator and minimal (almost no) JavaScript: basically as low-power
as one could&nbsp;get.
</p>

<p>
The <a href="https://www.websitecarbon.com/website/simondobson-org/">full report</a> includes an approximate carbon cost per page visit
(60mg), and even tries to work out the underlying energy provision,
dirty or renewable – dirty in my case at the moment, unfortunately.
(I&#8217;m currently hosted on GitHub.) I should perhaps take the hint and
move onto an alternative provider, or even host it myself with a
solar-powered Raspberry Pi. <a href="https://solar.lowtechmagazine.com/">Low-tech Magazine</a> does this, but they
<i>are</i> based in Barcelona rather than&nbsp;Scotland…
</p>

<p>
You can even include a badge that reports your rating&nbsp;&#8220;live&#8221;:
</p>

<div id="wcb" class="carbonbadge"></div>
<script src="https://unpkg.com/website-carbon-badges@1.1.3/b.min.js" defer></script><p>
(It caches so as to only make one request per day.) On the other
hand this increases the JavaScript footprint slightly, so I don&#8217;t
think I&#8217;ll be using it anywhere apart from just&nbsp;here.
</p>
</div>
</div>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../goodreads/diary-of-an-mps-wife-inside-and-outside-power/" rel="bookmark">Friday 23 February, 2024</a>
			</span>
		    </div>
		    <h1><a href="../goodreads/diary-of-an-mps-wife-inside-and-outside-power/">Diary of an <span class="caps">MP</span>&#8217;s Wife: Inside and Outside&nbsp;Power</a></h1>
		</div>
		<div class="entry-content">
			<div>
    <div>
      <img src="https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1599934352l/55310315._SX98_.jpg" style="float: left; margin-right: 10px"><h2>
	Sasha&nbsp;Swire
      </h2>
    </div>
    <p>
      An insight into the British politics of the 2010s. And not a pretty sight.<br><br>The pitch for this book is that, as a political wife, the author had a unique ringside seat from which to observe the goings-on the (mostly male) politicians. And it&#8217;s true that she has plenty of insight into them and into her own position in the circle.<br><br>But she also exposes herself as almost a caricature of a Tory. She accepts the misogyny and crudeness of the male MPs as just how it is, and utterly lacks any understanding of why anyone would disagree with her own positions. She can&#8217;t accept, for example, that Remainers were sincere and their misgivings might be valid, or that the <span class="caps">EU</span> is anything other that fascinated with the idea of humiliating Britain. She constantly refers to the Labour party as &#8220;Marxists&#8221; and trots-out the usual tropes of how they would bankrupt the country, despite the fact that their &#8220;extreme left-wing&#8221; positions would be entirely mainstream in many European countries. She&#8217;s clear-eyed and unenthusiastic about Boris Johnson as Prime Minister, but then fawns over him when he wins his election landslide and glides over the time-bomb he planted on the Irish border issue, even though this was evident at the time.<br><br>The overwhelming theme, returned to again and again, is how self-interested the political class is, focused entirely on who&#8217;s up, who&#8217;s down, and how if affects their own careers. Lots of dinner parties, gentlemen&#8217;s clubs, and holidays: one is left amazed by how shallow everyone is.<br><br>It&#8217;s not a bad book, and an enjoyably light read. But politically insightful it isn&#8217;t, other than to highlight the trivial nature of&nbsp;politicians.
      </p>
<p>
	3/5.
	  Finished Friday 23 February,&nbsp;2024.
	</p>
<p>
	  (Originally published on <a href="https://www.goodreads.com/review/show/6052150109?utm_medium=api&amp;utm_source=rss">Goodreads</a>.)
  </p>
</div>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../goodreads/the-death-of-grass/" rel="bookmark">Sunday 11 February, 2024</a>
			</span>
		    </div>
		    <h1><a href="../goodreads/the-death-of-grass/">The Death of&nbsp;Grass</a></h1>
		</div>
		<div class="entry-content">
			<div>
    <div>
      <img src="https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1486838846l/941731._SY160_.jpg" style="float: left; margin-right: 10px"><h2>
	John Christopher&nbsp;(1956)
      </h2>
    </div>
    <p>
      Post-apocalyptic fiction of a determinedly British kind. It&#8217;s not a bad book, and has a certain complexity to it in exploring how people&#8217;s attitudes might change when faced with the destruction of normal civilisation.<br><br>A deadly virus destroys all grass-like plants, thereby eliminating almost all food crops and the cattle that they feed. Worried the government might atom-bomb the major population centres, a small group leave London to make their way to a Lake District valley. On the way they encounter looters, towns gone feral to protect themselves – and become feral themselves, willing to kill to survive. In some ways it reads like <a href="https://www.goodreads.com/book/show/7624.Lord_of_the_Flies" title="Lord of the Flies by William Golding" rel="nofollow noopener">Lord of the Flies</a> with adults and a more pervading sense of long-term doom.<br><br>But it&#8217;s also very much a novel of its time, full of racism, sexism, classism, deference, stiff upper lips, and a sense of self-justification wrapped-up as duty. That makes it a hard read, and it doesn&#8217;t really have enough force to balance that out. Manu similar points are made elsewhere, for example in <a href="https://www.goodreads.com/book/show/93269.Earth_Abides" title="Earth Abides by George R. Stewart" rel="nofollow noopener">Earth Abides</a>, without the 1950s baggage.<br><br></p>
<p>
	2/5.
	  Finished Sunday 11 February,&nbsp;2024.
	</p>
<p>
	  (Originally published on <a href="https://www.goodreads.com/review/show/4779364492?utm_medium=api&amp;utm_source=rss">Goodreads</a>.)
  </p>
</div>
		</div>
	    </article>
</div>
	<div class="site-content">
	    <article class="format-standard libretto-long-form"><div class="title-block post-format-icon-pin">
		    <div class="entry-meta">
			<span class="posted-on">
			    Posted on <a href="../2024/02/10/some-criticisms-of-lisp/" rel="bookmark">Saturday 10 February, 2024</a>
			</span>
		    </div>
		    <h1><a href="../2024/02/10/some-criticisms-of-lisp/">Trying to refute some criticisms of&nbsp;Lisp</a></h1>
		</div>
		<div class="entry-content">
			<div id="outline-container-org8aaa568" class="outline-2">
<h2 id="org8aaa568">Trying to refute some criticisms of&nbsp;Lisp</h2>
<div class="outline-text-2" id="text-org8aaa568">
<p>
I recently had a discussion with someone on Mastodon about Lisp and
its perceived (by them) deficiencies as a language. There were some
interesting points, but I felt I had to try to refute them, at least&nbsp;partially.
</p>

<p>
I should say from the start the I&#8217;m not blind to Lisp&#8217;s many
inadequacies and anachronisms, merely pointing out that it has a
context like everything&nbsp;else.
</p>

<p>
There seemed to be two main&nbsp;issues:
</p>

<ul class="org-ul">
<li>Poor design decisions throughout, and especially a lack of static&nbsp;typing</li>
<li>The shadows of really early machines&nbsp;in <code>car</code> and <code>cadr</code>
</li>
</ul>
<p>
These points are tied together, but let&#8217;s try to unpack&nbsp;them.
</p>
</div>

<div id="outline-container-org326db4d" class="outline-3">
<h3 id="org326db4d">Design</h3>
<div class="outline-text-3" id="text-org326db4d">
<p>
Let&#8217;s start with design. Lisp is over half a century old. I&#8217;d argue
it was exceptionally well-designed – when it was designed. It
lacks most modern advances in types because … well, they didn&#8217;t
exist, many of them arose as solutions to perceived problems in
Lisp (and Fortran), and many of those &#8220;solutions&#8221; still aren&#8217;t
universally accepted, such as static typing&nbsp;itself.
</p>

<p>
What we&#8217;ve actually learned is that many aspects of programming
lack any really universal solutions. If static typing were such an
obvious and unarguable route to efficiency and quality, all new
software would be being written in&nbsp;Haskell.
</p>
</div>
</div>


<div id="outline-container-orgdba6490" class="outline-3">
<h3 id="orgdba6490">Typing and&nbsp;features</h3>
<div class="outline-text-3" id="text-orgdba6490">
<p>
And the lack of modern types isn&#8217;t really as clear-cut as it
appears. The argument about the <i>lack</i> of features in Lisp also
ignores the <i>presence</i> of other features that are absent from
almost all other&nbsp;languages.
</p>

<p>
Lisp&#8217;s numeric types are surprisingly flexible. Indeed, Common Lisp
is still, in the 21st century, just about the only language in
which one can write modern crypto algorithms like Diffie-Hellman
key exchange without recourse to additional libraries, because it
has arbitrary-precision integer arithmetic built-in to the standard
operators. It also has rational numbers, so no loss of precision on
division&nbsp;either.
</p>

<p>
The Common Lisp Object System (<span class="caps">CLOS</span>) is vastly more flexible than
<i>any</i> modern object-oriented language. Sub-class methods can
specify their relationship with the methods they override, such as
being called after or just filtering the return values. Methods
themselves are multiple-dispatch and so can be selected based on
the types of their arguments as well as their target. The basic
mechanisms can be overridden or extended using a meta-object&nbsp;protocol.
</p>

<p>
Then there are macros. It&#8217;s easy to underestimate these: after all,
C has macros, doesn&#8217;t it? Well, yes – and no. A C macro is a
function from strings to strings that can do literal string
substitution of its arguments. A Lisp macro is a function from code
to code that can perform arbitrary computation. They&#8217;re really not
the same things at all, and it&#8217;s misleading that the same word is
used for both. (C++ templates are a closer analogy, but still
limited in&nbsp;comparison.)
</p>
</div>
</div>


<div id="outline-container-org9a69847" class="outline-3">
<h3 id="org9a69847">The persistence of hardware 1: Stupid operation&nbsp;names</h3>
<div class="outline-text-3" id="text-org9a69847">
<p>
The complaints&nbsp;about <code>car</code> and <code>cdr</code> are long established: they
were originally derived from <a href="https://en.wikipedia.org/wiki/CAR_and_CDR">machine-language instructions on the
<span class="caps">IBM</span> 704</a> that was used for the first Lisp implementations. They&#8217;re
a terrible hold-over from that terrible decision … aren&#8217;t&nbsp;they?
</p>

<p>
Well, yes – and no. Of course they&#8217;re terrible in one sense.&nbsp;But
<code>car</code> and <code>cdr</code> are basically nouns as far as Lisp programmers are
concerned. One could replace them with more modern usages&nbsp;like
<code>head</code> and <code>tail</code> (and indeed many Lisps define these using&nbsp;macros).
</p>

<p>
But it&#8217;s important to remember that even &#8220;head&#8221; and &#8220;tail&#8221; are
analogies, sanctified by familiarity in the computer science
literature but still inexplicable to anyone outside. (If you doubt
that, try explaining to someone who isn&#8217;t a programmer that a
shopping list has a &#8220;head&#8221; consisting of the first entry, and a
&#8220;tail&#8221; consisting of another, shorter, shopping list, is &#8220;in fact&#8221;
a recursive type, and you have to acquire each item of shopping
sequentially by working your way down the list from the&nbsp;head.)
<code>car</code> and <code>cdr</code> are artificial nouns,&nbsp;and <code>cons</code> is an artificial
verb – but really no more artificial&nbsp;that <code>head</code>, <code>tail</code>,&nbsp;and
<code>append</code>, their rough equivalents in other&nbsp;languages.
</p>

<p>
One can argue that the persistence&nbsp;of <code>car</code> and <code>cdr</code> drives the
persistence of compounds&nbsp;like <code>caaddr</code>. But those are unnecessary
and seldom used: barely anyone would mind if they were&nbsp;removed.
</p>
</div>
</div>

<div id="outline-container-orgbf55fb2" class="outline-3">
<h3 id="orgbf55fb2">The persistence of hardware 2: It happens a&nbsp;lot</h3>
<div class="outline-text-3" id="text-orgbf55fb2">
<p>
The suggestion that Lisp has hardware holdovers that should be
removed also neglects these holdovers in other&nbsp;languages.
</p>

<p>
As an example, check the definition&nbsp;of <code>std::memcpy</code> in C++. It
doesn&#8217;t work with overlapping memory areas. Why is that? – why is
it so fast, but so dangerous? Does it relate to underlying machine
features, such as machine code move instructions on particular
machines with particular restrictions? Doesn&#8217;t this introduce the
risk of security flaws like buffer&nbsp;overruns?
</p>

<p>
Languages with more abstracted machine models don&#8217;t have these
issues. I struggle to think of how one could even introduce the
<i>concept</i> of a buffer overrun into Lisp, other than by using some
external raw-memory-access library: the language itself is immune,
as far as I&nbsp;know.
</p>
</div>
</div>

<div id="outline-container-org82d3540" class="outline-3">
<h3 id="org82d3540">The different&nbsp;choices</h3>
<div class="outline-text-3" id="text-org82d3540">
<p>
For the sake of argument, let&#8217;s turn the argument around and ask:
give that early Lisps had proper macros, arbitrary-precision
integers, and so on, why did these features disappear from what we
now consider to be &#8220;the mainstream&#8221; of programming language&nbsp;design?
</p>

<p>
Lisp&#8217;s designers had a goal of building a powerful machine in which
to think: indeed, they intended it to eventually have its own
hardware designed specifically for it to run on. They therefore
didn&#8217;t buy into the necessity of immediate performance, and as
their applications were largely symbolic <span class="caps">AI</span> they didn&#8217;t need
numerical performance at all. They chose instead to create high-level
constructs even if these couldn&#8217;t be compiled efficiently, and
explored using these to create more code as they identified more
and more abstract patterns whose details could be automated away.
(Paul Graham has <a href="https://paulgraham.com/diff.html">a great essay</a> on&nbsp;this.)
</p>

<p>
Other language designers had other priorities. Often they needed to
do numerical simulation, and needed both performance and scale. So
they chose a different design pathway, emphasising efficient
compilation to the hardware they had available, and made the
compromises needed to get it. These have persisted, and that&#8217;s why
we have languages with fixed-width integers scaled to fit into a
single machine register, and compilers that generate – but don&#8217;t
directly execute – the code of programs, which limits our ability
to abstract and automate code generation without recourse to
complicated external&nbsp;tools.
</p>

<p>
It&#8217;s interesting to explore these choices. They&#8217;re at one level
&#8220;just&#8221; historical: accidents that shaped the present. But at
another level they&#8217;re still very much present in the hardware and
software landscape we inhabit. I think it&#8217;s important that we
remind ourselves, continuously, that <i>much of that landscape is a
choice</i>, not a given, and one we can question and change as we&nbsp;wish.
</p>
</div>
</div>
</div>
		</div>
	    </article>
</div>
    <!-- Lower Navigation links -->
    <nav class="site-content navigation-post" role="navigation"><div class="previous">
		<a href="index-138.html" rel="prev">
		    <span class="meta-nav">Older Entries</span>		</a>
	    </div>
	    <div class="next">
		<a href="index-140.html" rel="next">
		    <span class="meta-nav">Newer Entries</span>		</a>
	    </div>
    </nav><!-- Page Footer --><section class="footer-sidebar clear" role="complementary"><div class="widget-block">
	    <aside class="widget"><h2 class="widget-title">Simon&nbsp;Dobson</h2>
		<div class="widget-text">Aut tace aut loquere meliora silentio</div>
	    </aside>
</div>
    </section><!-- Extra JavaScript --><!-- Site Attributions --><footer class="site-footer" role="contentinfo"><div class="site-info">
	    <p></p>
	    <p>
	      Built with free and open-source software.
	      Powered by <a href="https://getnikola.com/">Nikola</a> using a theme based on
	      <a href="https://themes.getnikola.com/v7/libretto/">Libretto</a>.
	    </p>
	    <p>
	      All content Copyright © 2010–2024 Simon Dobson and licensed under
	      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="caps">CC</span>-<span class="caps">BY</span>-<span class="caps">NC</span>-<span class="caps">SA</span>-4.0</a>
	      unless otherwise&nbsp;noted.
	    </p>
	</div>
	<div class="social">
	    <ul class="menu"></ul>
</div>
    </footer>
</body>
</html>