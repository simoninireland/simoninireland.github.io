<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A journey into the practicalities of hacker self-publication">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Self-publishing "Epidemic modelling" | Simon Dobson</title>
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../../rss.xml">
<link rel="canonical" href="https://simondobson.org/blog/2020/07/22/self-publishing/">
<!--[if lt IE 9]><script src="../../../../../assets/js/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-10943215-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-10943215-1');
</script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
<meta name="author" content="Simon Dobson">
<link rel="prev" href="../../../../goodreads/the-electric-kool-aid-acid-test/" title="The Electric Kool-Aid Acid Test" type="text/html">
<link rel="next" href="../em-book-published/" title='"Epidemic modelling" published' type="text/html">
<meta property="og:site_name" content="Simon Dobson">
<meta property="og:title" content='Self-publishing "Epidemic modelling"'>
<meta property="og:url" content="https://simondobson.org/blog/2020/07/22/self-publishing/">
<meta property="og:description" content="A journey into the practicalities of hacker self-publication">
<meta property="og:image" content="https://simondobson.org/images/posts/20200722-em-book.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-07-17T18:03:14+01:00">
<meta property="article:tag" content="essay">
<meta property="article:tag" content="experience">
<meta property="article:tag" content="self-publishing">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@simoninireland">
<meta name="twitter:creator" content="@simoninireland">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../../../../">

            <span id="blog-title">Simon Dobson</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../../whats-happening/" class="nav-link">What's happening</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
            <div class="dropdown-menu">
                    <a href="../../../../../personal/about-me/" class="dropdown-item">Welcome</a>
                    <a href="../../../../../personal/biography/" class="dropdown-item">Biography</a>
                    <a href="../../../../../personal/contact/" class="dropdown-item">Contact</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Academic</a>
            <div class="dropdown-menu">
                    <a href="../../../../../research/research-interests/" class="dropdown-item">Current interests</a>
                    <a href="../../../../../research/current-group/" class="dropdown-item">Current group</a>
                    <a href="../../../../../research/publications/" class="dropdown-item">Publications</a>
                    <a href="../../../../../research/publications-by-year/" class="dropdown-item">Publications by year</a>
                    <a href="../../../../../research/bibliometrics/" class="dropdown-item">Bibliometrics</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Writing</a>
            <div class="dropdown-menu">
                    <a href="../../../../../writing/essays/" class="dropdown-item">Essays</a>
                    <a href="../../../../../writing/em-book/" class="dropdown-item">Epidemic modelling -- Some notes, maths, and code</a>
                    <a href="../../../../../writing/cncp-book/" class="dropdown-item">Complex networks, complex processes</a>
                    <a href="../../../../../writing/book-reviews" class="dropdown-item">Book reviews</a>
                    <a href="../../../../../categories/" class="dropdown-item">Articles by topic</a>
                    <a href="../../../../../archive.html" class="dropdown-item">Article by date</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Current projects</a>
            <div class="dropdown-menu">
                    <a href="../../../../../development/epyc/" class="dropdown-item">epyc</a>
                    <a href="../../../../../development/epydemic/" class="dropdown-item">epydemic</a>
                    <a href="../../../../../development/simplicial/" class="dropdown-item">simplicial</a>
                    <a href="../../../../../galleries/" class="dropdown-item">Photography</a>
            </div>
                </li>
<li class="nav-item">
<a href="../../../../../old-projects/" class="nav-link">Older projects</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Self-publishing "Epidemic modelling"</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Simon Dobson
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-07-17T18:03:14+01:00" itemprop="datePublished" title="2020-07-17 18:03">2020-07-17 18:03</time></a>
            </p>
            
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I thought I should record the journey I took to self-publishing a
science book, in case anyone else decides they want to follow me on
it.</p>
<!-- TEASER_END -->

<p>When I first decided to write <a href="https://www.amazon.co.uk/dp/1838535659/">a book on epidemic
modelling</a> I didn't really have a
clear idea what I intended. Was it supposed to be a tutorial? Popular
science? Hardcore technical science? Was it even supposed to be for
public consumption at all? And regardless of the answer to <em>that</em>
question, how do you write, format, and publish a book when you don't
want to put yourself under stress by engaging with a publisher?</p>
<p>After just under three months I now know the answers to these
questions. It was a popular science tutorial complete with code. It
<em>was</em> intended for public consumption, online and in print. And the
technology is accessible and rewarding for the dedicated hacker
(although possibly an indescribable frustration to anyone else).</p>
<h3>The backstory</h3>
<p>Despite a couple of decades in academia, I'd never written a book
before. The only book-length document I'd ever completed was my PhD
thesis, and back then (1992...) you wrote it, printed it yourself, and
took it along to the university print shop to be bound, and delivered
it to the library to be filed -- probably there to rest
undisturbed. (PhD theses are the ultimate write-only document.)</p>
<p>I did make a start on a book a few years ago. This was conceived as a
textbook on complex networks that would contain all the descriptions,
maths, and code needed to get started working in the area. There are
other introductions, but they're not typically written with computer
scientists in mind -- or even those who are interested in building
their own simulations -- and so they don't typically contain any code
or discussion about the issues involved in simulation. Which is a
shame, as they are both fascinating and essential to practical
research. The project stumbled on my not being able to find
a technology that would support what I had in mind without a lot of
extra work.</p>
<p>My recent work has been concerned with understanding the mathematical
properties of networks and stochastic spreading processes. Disease
epidemics are a classic example of this: the disease spreads through a
network of human contacts, infecting susceptible people with some
probability. This involves both analytical mathematics and numerical
simulation, often written in Python and usually require a <em>lot</em> of
processor time. The processes are also complicated enough to be a
testing challenge. I'd therefore written two Python libraries to help
the work along: one that managed the running of computational
experiments involving lots of experimental repetitions across
multi-dimensional parameter spaces
(<a href="https://pypi.org/project/epyc/"><code>epyc</code></a>); and one that provided the
basic simulation framework and canonical processes for studying
epidemic and other processes
(<a href="https://pypi.org/project/epydemic/"><code>epydemic</code></a>).</p>
<p>Then covid-19 hit. Lockdown. People who knew that I worked on
epidemics spreading in networks started asking me about the pandemic,
about government responses, and what did it actually <em>mean</em> that they
were "following the science"? -- what sort of science would they be
relying on? Well, I needed a project anyway, so I started writing in
the style that I'd previously had in mind -- notes, maths, and code --
and hoped the technology had moved on sufficiently.</p>
<p>It had.</p>
<h3>Writing technology</h3>
<p>After deciding <em>what</em> to write, The next decision a writer needs to
make is what they'll be writing <em>in</em>. For civilians that's easy, and
they break out the word processor. For computer scientists it's
harder. We have a wealth of choices, actually enough to induce a
paralysis of indecision. Not all choices are created equal,
however, and in particular, some choices work better together than
others. Pick a starting point, I reasoned, and many of the secondary
choices will fall into place automatically.</p>
<p>In my case the starting point was straightforward. Since I wanted a
lot of code, and since it'd be "live" code integral to the project and
needing to be run while I was writing, I needed some way of writing
both literary and executable content in the same document
structure. <a href="https://www.jupyter.org">Jupyter</a> notebooks were the
obvious choice.</p>
<p>A notebook sits in a browser and presents a "cell" structure to the
writer. A cell can contain text, which can also include maths. The
notebook lets the writer edit the cell and then render it, at which
point any LaTeX-style maths is rendered as ... well, maths. Text cells
actually contain "markdown" text, which is familiar to anyone who's
ever written Python documentation. Markdown structures plain text in
such a way that it can be rendered properly into, for example, HTML or
PDF. Markdpwn isn't exactly standard, but there are <a href="https://guides.github.com/features/mastering-markdown/">fairly standard
dialects</a> that
are enough to be getting started with. Markdown can also include maths
formatted using LaTeX-style formulae, which Jupyter then automatically
renders using <a href="https://www.mathjax.org/">MathJax</a>.</p>
<p>A cell can also contain code. Jupyter supports a huge range of
languages, although each notebook has to commit to exactly one:
Python, in my case. These cells can be executed, and the results come
back into the notebook. This is especially great if the results are a
diagram, because that gets rendered into the notebook too. You simply
instruct the notebook to generate diagrams inline, typically in the
first eceutable cell where you import any packages:</p>
<pre class="code literal-block"><span></span><code><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">networkx</span>
<span class="kn">import</span> <span class="nn">epyc</span>
<span class="kn">import</span> <span class="nn">epydemic</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">import</span> <span class="nn">mpmath</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">config</span> <span class="n">InlineBackend</span><span class="o">.</span><span class="n">figure_format</span> <span class="o">=</span> <span class="s1">'svg'</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</code></pre>

<p>The use of SVG makes for scalable plots, but I wasn't keen on the
standard notebook presentation, so I used <code>seaborn</code> to get a nicer
layout and colour scheme adjusted for notebook use, and played with
the font sizing until I liked it:</p>
<pre class="code literal-block"><span></span><code><span class="kn">import</span> <span class="nn">seaborn</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">'seaborn'</span><span class="p">)</span>
<span class="n">seaborn</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="s2">"notebook"</span><span class="p">,</span> <span class="n">font_scale</span><span class="o">=</span><span class="mf">1.75</span><span class="p">)</span>
</code></pre>

<p>The net result is a single document that's partly text and partly
executable. It's a very interactive way to write code. It encourages
writing explanations of executable content at a level that's far more
detailed (and for a different purpose) than code comments. Anyone old
enough to remember <a href="http://www.literateprogramming.com/">literate
programming</a> will get the idea
immediately, and Jupyter is to my mind the logical extension of these
ideas into practical computational (rather than just computer)
science.</p>
<p><img alt="Jupyter in action" src="../../../../../images/posts/20200722-jupyter.png"></p>
<p>Having committed to Jupyter largely from necessity, it then made
sense to follow this choice and write <em>everything</em> in markdown.</p>
<p>The last piece of writing technology for the paranoid hacker isn't
about writing, it's about backups. Putting everything on
<a href="https://github.com">Github</a> protects the work from accidental loss
and provides all the other advantages of version control. If you've
used this for writing software, you won't want to abandon it for
writing. Fortunately Jupyter and markdown generally are simply text
files, which mean they interact well with modern version control
systems.</p>
<h3>Getting on the web (at all)</h3>
<p>In a sense Jupyter is intrinsically on the web since all editing
happens in a browser, but that's not suitable for public, read-only
access. But there are plenty of ways to make a notebook visible, all
with their own advantages and disadvantages:</p>
<ul>
<li>You can run your own notebook server. Needs an open internet
  connection and a cavalier attitude towards system security.</li>
<li>Any notebook hosted on Github will be rendered when visited. Quick
  and simple. Nasty user experience.</li>
<li>Any notebook with a URL can be passed to
  <a href="https://nbviewer.jupyter.org/">nbviewer</a> to be rendered. Hard to
  interact across multiple notebooks.</li>
<li>
<a href="https://mybinder.org/">Binder</a> will take a repo of notebooks and
  spin them up in a container. Very flexible and executable. Not a
  reader-focused experience.</li>
</ul>
<p>Each of these tools meets a specific use case -- and does so very
well. Unfortunately they weren't <em>my</em> use case: an online book,
accessible to the non-technical reader and offering a good reading
experience.</p>
<h3>Getting onto the web (as a book)</h3>
<p>And then I discovered <a href="https://jupyterbook.org/intro.html">Jupyter Book</a>.</p>
<p>This was exactly what I had in mind. It allows a collection of
notebooks, markdown, and files of other types to be linked together
into a book structure, applying the necessary web styling, links, and
other boilerplate around the writing. It renders notebooks seamlessly
so they read like any other document. You can mark cells to be left
un-rendered, or collapse the input or output of a cell behind a "click
to show" button. Digging a bit deeper, you can even include <a href="https://analytics.google.com/analytics/web/">Google
Analytics</a> tracker code
to monitor visits. All good.</p>
<p>Actually, this is just the most basic use case. Jupyter Book is
essentially a front-end to the
<a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> document system that's
used to generate Python documentation for use on <a href="https://readthedocs.org/">Read the
Docs</a> and similar sites, familiar to anyone
who maintains a Python library. But Sphinx itself has more to offer:
it can take the same collection of markdown, ReStructured Text, and
the like and generate HTML, or LaTeX, or TexInfo, or basically any
technical format in common use. It does code syntax colour
highlighting. It handles maths. It has extensions that understand
BibTeX for generating reference lists. It's extensible to introduce
extra kinds of markup. And so on, warming the deepest recesses of the
hacker's heart.</p>
<p>To use Jupyter Book you define two files, <code>_config.yml</code> describing the
overall configuration and <code>_toc.yml</code> laying-out the table of
contents. From these Jupyter Book generates a static web site.</p>
<p>There's a particular directory structure (which the tool populates
when it's initialised) required. I'm never a fan of these things, as
they can lock the content too tightly into one specific tool, so I
wrote as makefile to keep the content separate and copy the source
files around as required to perform the build.</p>
<p>Sitting on Sphinx means there's good theming support. Jupyter Book
comes with a book style that's based on the work of <a href="https://www.edwardtufte.com/tufte/">Edward
Tufte</a>, whose work has a
distinctive style of large margins for frequent marginal notes. The
idea is that footnotes become sidenotes and citations are placed next
to the text, to keep all relevant information within the visual
field. The theme defines a <code>.. margin::</code> directive for use in markdown
to generate the marginal notes, which are then rendered properly on
the web pages. There are also <code>{cite}</code> and <code>{index}</code> roles that
include citations and index terms respectively.</p>
<p>At this point I realised two things:</p>
<ol>
<li>I could write my book using the technologies I wanted and get a
   reader-friendly version on the web with next to no effort.</li>
<li>I could <em>probably</em> get a version for proper on-demand printing too,
   and make it available as a print book just as easily.</li>
</ol>
<p>The first realisation turned out to be true; the second not exactly
because of the alpha quality of Jupyter Book, but it <em>was</em> possible
with care (and without a change of tooling).</p>
<p>At this point I discovered that my choice of Github as an aid to
writing was unexpectedly also an aid to publishing. This is because of
<a href="https://pages.github.com/">Github Pages</a>, a service that lets any
public Github repo generate a web site for itself that's also hosted
by Github. It's primarily intended for providing home pages for
open-source development projects, but works equally well for
open-source books.</p>
<p>The mechanism is easy. You designate a branch of the repo to hold the
web site as a set of pages -- a static site, just HTML and CSS. You
then commit the pages you want to this branch, and they get
served. Keeping the branches separate means you can commit to the
master branch freely, and do a specific <code>git commit</code> on the page
branch to deploy the site. The mechanics of this might get tricky, but
(as they say) there's a plug-in for that, in the form of the
<a href="https://github.com/davisp/ghp-import"><code>ghp-import</code></a> Python
package. Jupyter Book generates the HTML static site, and <code>ghp-import</code>
takes care of committing to the correct branch. Couldn't be
easier. This also got added to my makefile.</p>
<p>And so the project went on the web in reader-friendly style, without
very much in the way of fuss.</p>
<p><img alt="On the web" src="../../../../../images/posts/20200722-em-book.png"></p>
<p>The theme turns out to be responsive, too, so it even looks pretty
readable on a phone.</p>
<p><img alt="On a phone" src="../../../../../images/posts/20200722-em-book-phone.png"></p>
<p>(The margins disappear, and you can see at the bottom of the screen
that the marginal notes float into place.)</p>
<h3>Printing</h3>
<p>I was excited to read that Jupyter Book supports the conversion of
documents to PDF <em>via</em> <a href="https://latex.net/">LaTeX</a>, the document
preparation of choice for many scientists. This turns out not to quite
be true -- at least, not yet. While Jupyter Book <em>will</em> generate LaTeX
output, there are limitations at the moment -- understandably since
it's a new project still in the throes of defining itself. I didn't
want to wait. So I got a lot more intimate with Sphinx.</p>
<p>Actually the process is pretty straightforward. Sphinx is driven by a
<code>conf.py</code> file, the
<a href="https://www.sphinx-doc.org/en/master/usage/configuration.html">format</a>
of which is very well-described. It won't use Jupyter Book's
<code>_toc.yml</code>, which is actually a good thing as the layout of a print
book will typically be different to that of an online book, so
there'll typically be slightly different files in a slightly
different order. I defined a master document for this, plus some
auxiliary bits and pieces.</p>
<p>There were a couple of problems. Firstly, LaTeX doesn't really like
SVG figures. Jupyter has several options, so I changed the notebook
header cell to select PNG instead.</p>
<p>```{code
import matplotlib
%matplotlib inline
%config InlineBackend.figure_format = 'png'</p>
<pre class="code literal-block"><span></span><code><span class="n">The</span> <span class="n">other</span> <span class="n">issue</span> <span class="n">concerned</span> <span class="n">getting</span> <span class="n">references</span> <span class="n">and</span> <span class="n">citations</span> <span class="n">to</span>
<span class="n">work</span><span class="p">.</span> <span class="n">The</span> <span class="p">[</span><span class="n">Sphinx</span> <span class="n">plug</span><span class="o">-</span><span class="n">in</span> <span class="k">for</span>
<span class="k">this</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//sphinxcontrib-bibtex.readthedocs.io/en/latest/) works</span>
<span class="n">perfectly</span> <span class="k">for</span> <span class="n">online</span> <span class="n">use</span> <span class="n">but</span> <span class="n">not</span> <span class="n">so</span> <span class="n">well</span> <span class="k">for</span> <span class="n">print</span> <span class="n">usage</span><span class="p">,</span> <span class="n">especially</span>
<span class="n">with</span> <span class="n">a</span> <span class="n">more</span> <span class="n">complicated</span> <span class="n">document</span> <span class="k">class</span> <span class="p">(</span><span class="n">see</span> <span class="n">below</span><span class="p">).</span>  <span class="n">The</span> <span class="n">citation</span> <span class="n">tags</span>
<span class="n">that</span> <span class="n">it</span> <span class="n">generates</span> <span class="n">aren</span><span class="err">'</span><span class="n">t</span> <span class="n">quite</span> <span class="n">the</span> <span class="n">ones</span> <span class="n">in</span> <span class="n">the</span> <span class="n">underlying</span> <span class="n">BibTeX</span>
<span class="n">file</span><span class="p">.</span> <span class="n">They</span><span class="err">'</span><span class="n">re</span> <span class="n">extended</span> <span class="n">with</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span> <span class="n">that</span> <span class="n">imports</span> <span class="n">the</span>
<span class="n">bibliography</span><span class="p">,</span> <span class="n">which</span> <span class="n">is</span> <span class="n">a</span> <span class="n">feature</span> <span class="n">to</span> <span class="n">allow</span> <span class="n">multiple</span> <span class="n">bibliographies</span> <span class="n">to</span>
<span class="n">co</span><span class="o">-</span><span class="n">exist</span><span class="p">.</span> <span class="n">That</span><span class="err">'</span><span class="n">s</span> <span class="n">non</span><span class="o">-</span><span class="n">standard</span> <span class="n">in</span> <span class="n">the</span> <span class="n">LaTeX</span> <span class="n">world</span><span class="p">,</span> <span class="n">so</span> <span class="n">I</span> <span class="n">piped</span> <span class="n">the</span>
<span class="n">resulting</span> <span class="n">LaTeX</span> <span class="n">file</span> <span class="n">through</span> <span class="err">`</span><span class="n">sed</span><span class="err">`</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">extras</span><span class="p">.</span>

<span class="n">Finally</span><span class="p">,</span> <span class="n">Sphinx</span> <span class="n">generates</span> <span class="kr">inline</span> <span class="err">`\</span><span class="n">bibitem</span><span class="err">`</span> <span class="n">calls</span><span class="p">,</span> <span class="n">which</span> <span class="n">again</span> <span class="n">isn</span><span class="err">'</span><span class="n">t</span>
<span class="n">quite</span> <span class="n">standard</span> <span class="k">for</span> <span class="n">LaTeX</span> <span class="n">and</span> <span class="p">(</span><span class="n">it</span> <span class="n">turns</span> <span class="n">out</span><span class="p">)</span> <span class="n">confuses</span> <span class="n">some</span> <span class="n">of</span> <span class="n">the</span> <span class="n">more</span>
<span class="n">complex</span> <span class="n">LaTeX</span> <span class="n">classes</span><span class="p">.</span> <span class="n">I</span> <span class="n">solved</span> <span class="k">this</span> <span class="n">by</span> <span class="n">letting</span> <span class="n">Sphinx</span> <span class="n">ingest</span> <span class="n">the</span>
<span class="n">bibfile</span> <span class="n">but</span> <span class="n">not</span> <span class="k">using</span> <span class="n">the</span> <span class="n">Sphinx</span> <span class="err">`</span><span class="p">..</span> <span class="n">bibliography</span><span class="o">::</span><span class="err">`</span> <span class="n">directive</span> <span class="n">to</span> <span class="n">lay</span>
<span class="n">it</span> <span class="n">out</span> <span class="n">in</span> <span class="n">the</span> <span class="n">document</span><span class="p">,</span> <span class="n">and</span> <span class="n">instead</span> <span class="n">adding</span> <span class="n">a</span> <span class="n">separate</span> <span class="n">file</span> <span class="n">to</span> <span class="n">include</span>
<span class="n">the</span> <span class="n">usual</span> <span class="n">LaTeX</span> <span class="err">`\</span><span class="n">bibliographystyle</span><span class="err">`</span> <span class="n">and</span> <span class="err">`\</span><span class="n">bibliography</span><span class="err">`</span>
<span class="n">commands</span><span class="p">.</span> <span class="n">This</span> <span class="n">meant</span> <span class="n">that</span> <span class="n">the</span> <span class="n">usual</span> <span class="n">LaTeX</span><span class="o">/</span><span class="n">BibTeX</span> <span class="n">square</span> <span class="n">dance</span> <span class="n">would</span>
<span class="n">lay</span> <span class="n">the</span> <span class="n">references</span> <span class="n">out</span> <span class="n">correctly</span><span class="p">.</span>

<span class="n">A</span> <span class="n">similar</span> <span class="n">problem</span> <span class="n">affects</span> <span class="n">index</span> <span class="n">generation</span><span class="p">.</span> <span class="n">This</span> <span class="n">time</span> <span class="n">it</span> <span class="n">arises</span>
<span class="n">because</span> <span class="n">Sphinx</span> <span class="n">isn</span><span class="err">'</span><span class="n">t</span> <span class="n">careful</span> <span class="n">enough</span> <span class="n">about</span> <span class="n">injecting</span> <span class="n">spaces</span> <span class="n">into</span> <span class="n">the</span>
<span class="n">generated</span> <span class="n">LaTeX</span> <span class="err">`\</span><span class="n">index</span><span class="err">`</span> <span class="n">commands</span><span class="p">,</span> <span class="n">which</span> <span class="n">causes</span> <span class="n">duplicate</span> <span class="n">index</span>
<span class="n">entries</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span> <span class="n">the</span> <span class="n">same</span> <span class="n">term</span> <span class="n">indexed</span> <span class="n">to</span> <span class="n">different</span> <span class="n">pages</span><span class="p">.</span> <span class="n">Another</span>
<span class="n">piece</span> <span class="n">of</span> <span class="err">`</span><span class="n">sed</span><span class="err">`</span> <span class="n">fixed</span> <span class="k">this</span> <span class="n">too</span><span class="p">,</span> <span class="n">and</span> <span class="n">adding</span> <span class="err">`\</span><span class="n">printindex</span><span class="err">`</span> <span class="n">brought</span> <span class="n">the</span>
<span class="n">index</span> <span class="n">into</span> <span class="n">the</span> <span class="n">document</span> <span class="n">in</span> <span class="n">the</span> <span class="n">appropriate</span> <span class="n">place</span><span class="p">.</span> <span class="p">(</span><span class="n">Strangely</span> <span class="n">enough</span>
<span class="n">Sphinx</span> <span class="n">emits</span> <span class="err">`\</span><span class="n">makeindex</span><span class="err">`</span> <span class="n">at</span> <span class="n">the</span> <span class="n">start</span> <span class="n">of</span> <span class="n">the</span> <span class="n">document</span> <span class="n">but</span> <span class="n">doesn</span><span class="err">'</span><span class="n">t</span>
<span class="n">emit</span> <span class="err">`\</span><span class="n">printindex</span><span class="err">`</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span><span class="p">.</span>


<span class="cp">## Better print styling</span>

<span class="n">Sphinx</span> <span class="n">is</span> <span class="n">at</span> <span class="n">bottom</span> <span class="n">a</span> <span class="n">tool</span> <span class="k">for</span> <span class="n">code</span> <span class="n">documentation</span><span class="p">,</span> <span class="n">and</span> <span class="n">its</span> <span class="n">in</span><span class="o">-</span><span class="n">built</span>
<span class="n">LaTeX</span> <span class="n">themes</span> <span class="n">are</span> <span class="n">understandably</span> <span class="k">restricted</span><span class="p">.</span> <span class="n">Having</span> <span class="n">followed</span> <span class="n">Tufte</span><span class="err">'</span><span class="n">s</span>
<span class="n">style</span> <span class="k">for</span> <span class="n">the</span> <span class="n">online</span> <span class="n">version</span> <span class="n">I</span> <span class="n">wanted</span> <span class="n">to</span> <span class="k">do</span> <span class="n">the</span> <span class="n">same</span> <span class="k">for</span> <span class="n">a</span> <span class="n">print</span> <span class="n">copy</span>
<span class="o">--</span> <span class="n">not</span> <span class="n">least</span> <span class="n">because</span> <span class="n">I</span><span class="err">'</span><span class="n">m</span> <span class="n">now</span> <span class="n">a</span> <span class="n">convert</span> <span class="n">to</span> <span class="k">this</span> <span class="n">style</span><span class="p">.</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">set</span> <span class="n">the</span> <span class="n">document</span> <span class="k">class</span> <span class="nc">for</span> <span class="n">the</span> <span class="k">final</span> <span class="n">document</span> <span class="n">and</span> <span class="n">instruct</span>
<span class="n">Sphinx</span> <span class="n">to</span> <span class="n">include</span> <span class="n">a</span> <span class="s">"prelude"</span> <span class="n">of</span> <span class="n">your</span> <span class="n">choice</span><span class="p">.</span> <span class="n">There</span> <span class="n">are</span> <span class="p">[</span><span class="n">lots</span> <span class="n">of</span> <span class="n">book</span>
<span class="n">templates</span> <span class="n">to</span> <span class="n">choose</span> <span class="n">from</span><span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//www.latextemplates.com/), and</span>
<span class="n">fortunately</span> <span class="n">there</span><span class="err">'</span><span class="n">s</span> <span class="n">a</span> <span class="p">[</span><span class="n">Tufte</span> <span class="n">book</span>
<span class="k">class</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//tufte-latex.github.io/tufte-latex/) that's included in</span>
<span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">LaTeX</span> <span class="n">distributions</span> <span class="n">as</span> <span class="n">standard</span><span class="p">.</span> <span class="n">I</span> <span class="n">did</span> <span class="n">a</span> <span class="n">small</span> <span class="n">amount</span> <span class="n">of</span>
<span class="n">customisation</span> <span class="n">in</span> <span class="n">a</span> <span class="err">`</span><span class="n">style</span><span class="p">.</span><span class="n">tex</span><span class="err">`</span> <span class="n">preamble</span> <span class="n">file</span><span class="p">,</span> <span class="n">mainly</span> <span class="n">to</span> <span class="n">get</span> <span class="n">a</span>
<span class="n">copyright</span> <span class="n">page</span> <span class="n">and</span> <span class="n">place</span> <span class="n">marginal</span> <span class="n">notes</span> <span class="n">into</span> <span class="n">the</span> <span class="n">margin</span> <span class="n">by</span> <span class="n">translating</span>
<span class="n">the</span> <span class="n">Sphinx</span><span class="o">-</span><span class="n">generated</span> <span class="n">command</span> <span class="n">to</span> <span class="n">the</span> <span class="n">command</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">Tufte</span>
<span class="k">class</span><span class="p">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="n">set</span> <span class="n">document</span> <span class="k">class</span> <span class="nc">options</span> <span class="n">like</span> <span class="n">the</span> <span class="n">paper</span> <span class="n">size</span>
<span class="p">(</span><span class="err">`</span><span class="n">b5paper</span><span class="err">`</span> <span class="n">in</span> <span class="n">my</span> <span class="k">case</span><span class="p">,</span> <span class="n">fairly</span> <span class="n">standard</span> <span class="k">for</span> <span class="n">scientific</span> <span class="n">books</span><span class="p">)</span> <span class="n">and</span>
<span class="n">whether</span> <span class="n">you</span><span class="err">'</span><span class="n">re</span> <span class="n">looking</span> <span class="k">for</span> <span class="n">a</span> <span class="n">PDF</span> <span class="n">suited</span> <span class="k">for</span> <span class="n">printing</span> <span class="p">(</span><span class="n">with</span> <span class="n">asymmetric</span>
<span class="n">margins</span> <span class="n">to</span> <span class="n">allow</span> <span class="k">for</span> <span class="n">the</span> <span class="n">spine</span><span class="p">)</span> <span class="n">of</span> <span class="k">for</span> <span class="n">viewing</span> <span class="n">online</span> <span class="p">(</span><span class="n">symmetric</span>
<span class="n">margins</span><span class="p">).</span> <span class="n">The</span> <span class="n">result</span> <span class="n">was</span> <span class="n">very</span> <span class="n">appealing</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="n">Tufte</span> <span class="n">print</span> <span class="n">styling</span><span class="p">](</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">20200722</span><span class="o">-</span><span class="n">em</span><span class="o">-</span><span class="n">book</span><span class="o">-</span><span class="n">print</span><span class="p">.</span><span class="n">png</span><span class="p">)</span>

<span class="n">Those</span> <span class="n">wide</span> <span class="n">margins</span> <span class="n">are</span> <span class="n">also</span> <span class="n">great</span> <span class="k">for</span> <span class="n">figures</span> <span class="n">that</span> <span class="n">benefit</span> <span class="n">from</span> <span class="n">the</span>
<span class="n">extra</span> <span class="n">width</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="n">Wide</span> <span class="n">figure</span> <span class="n">extending</span> <span class="n">into</span> <span class="n">the</span> <span class="n">margin</span><span class="p">](</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">20200722</span><span class="o">-</span><span class="n">em</span><span class="o">-</span><span class="n">book</span><span class="o">-</span><span class="n">print</span><span class="o">-</span><span class="n">wide</span><span class="p">.</span><span class="n">png</span><span class="p">)</span>

<span class="n">I</span> <span class="n">got</span> <span class="k">this</span> <span class="n">directly</span> <span class="n">from</span> <span class="n">the</span> <span class="n">markdown</span> <span class="n">by</span> <span class="k">using</span> <span class="n">the</span> <span class="err">`</span><span class="p">..</span> <span class="n">raw</span><span class="o">::</span> <span class="n">latex</span><span class="err">`</span>
<span class="n">directive</span> <span class="n">to</span> <span class="n">include</span> <span class="n">specific</span> <span class="n">markup</span> <span class="n">into</span> <span class="n">the</span> <span class="n">LaTeX</span> <span class="n">version</span> <span class="n">that</span><span class="err">'</span><span class="n">s</span>
<span class="n">ignored</span> <span class="n">in</span> <span class="n">the</span> <span class="n">HTML</span> <span class="n">or</span> <span class="n">other</span> <span class="n">renderings</span><span class="p">.</span>

<span class="n">This</span> <span class="n">whole</span> <span class="n">process</span> <span class="n">takes</span> <span class="n">markdown</span> <span class="n">and</span> <span class="n">notebooks</span> <span class="n">to</span> <span class="n">LaTeX</span> <span class="p">(</span><span class="n">and</span> <span class="n">then</span> <span class="n">to</span>
<span class="n">PDF</span><span class="p">,</span> <span class="n">seamlessly</span><span class="p">.</span> <span class="n">I</span> <span class="n">did</span> <span class="n">move</span> <span class="n">some</span> <span class="n">notes</span> <span class="n">around</span> <span class="n">to</span> <span class="n">make</span> <span class="n">them</span> <span class="k">break</span> <span class="n">better</span>
<span class="n">on</span> <span class="n">the</span> <span class="n">pages</span><span class="p">,</span> <span class="n">and</span> <span class="n">re</span><span class="o">-</span><span class="n">arranged</span> <span class="n">some</span> <span class="n">code</span> <span class="n">fragments</span> <span class="n">to</span> <span class="n">avoid</span> <span class="n">over</span><span class="o">-</span><span class="kt">long</span> <span class="n">lines</span><span class="p">.</span> 


<span class="cp">## Getting into print</span>

<span class="n">Most</span> <span class="n">people</span> <span class="n">writing</span> <span class="n">a</span> <span class="n">book</span><span class="p">,</span> <span class="n">at</span> <span class="n">least</span> <span class="n">when</span> <span class="n">they</span> <span class="n">get</span> <span class="k">this</span> <span class="n">stage</span><span class="p">,</span> <span class="n">have</span> <span class="n">a</span>
<span class="n">publisher</span> <span class="n">in</span> <span class="n">mind</span> <span class="n">or</span> <span class="n">even</span> <span class="n">a</span> <span class="n">contract</span><span class="p">.</span> <span class="n">A</span> <span class="n">publisher</span> <span class="n">wants</span> <span class="n">to</span> <span class="n">convince</span>
<span class="n">themselves</span> <span class="n">that</span> <span class="n">a</span> <span class="n">book</span> <span class="n">will</span> <span class="n">sell</span> <span class="n">enough</span> <span class="n">copies</span> <span class="n">to</span> <span class="n">make</span> <span class="n">them</span> <span class="n">money</span><span class="p">,</span> <span class="n">and</span>
<span class="n">will</span> <span class="n">put</span> <span class="n">in</span> <span class="n">the</span> <span class="n">effort</span> <span class="n">in</span> <span class="n">marketing</span> <span class="n">and</span> <span class="n">publicity</span> <span class="n">to</span> <span class="n">make</span> <span class="k">this</span> <span class="n">happen</span><span class="p">.</span> 

<span class="n">But</span> <span class="n">self</span><span class="o">-</span><span class="n">publishing</span> <span class="n">has</span> <span class="n">become</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">more</span> <span class="n">possible</span> <span class="n">these</span> <span class="n">days</span><span class="p">,</span> <span class="n">with</span>
<span class="n">print</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">demand</span> <span class="n">services</span> <span class="n">willing</span> <span class="n">to</span> <span class="n">take</span> <span class="n">on</span> <span class="n">essentially</span> <span class="o">*</span><span class="n">any</span><span class="o">*</span> <span class="n">book</span>
<span class="n">since</span> <span class="n">there</span><span class="err">'</span><span class="n">s</span> <span class="n">no</span> <span class="n">inventory</span> <span class="n">to</span> <span class="n">be</span> <span class="n">held</span><span class="p">.</span> <span class="n">Only</span> <span class="n">as</span> <span class="n">many</span> <span class="n">books</span> <span class="n">are</span> <span class="n">printed</span>
<span class="n">as</span> <span class="n">are</span> <span class="n">bought</span><span class="p">,</span> <span class="n">but</span> <span class="n">the</span> <span class="n">individual</span> <span class="n">cost</span> <span class="n">may</span> <span class="n">be</span> <span class="n">higher</span> <span class="n">to</span> <span class="n">account</span> <span class="k">for</span> <span class="n">the</span>
<span class="n">lack</span> <span class="n">of</span> <span class="n">economies</span> <span class="n">of</span> <span class="n">scale</span><span class="p">.</span> <span class="n">Since</span> <span class="n">I</span> <span class="n">harboured</span> <span class="n">no</span> <span class="n">delusions</span> <span class="n">as</span> <span class="n">to</span>
<span class="n">having</span> <span class="n">a</span> <span class="n">best</span><span class="o">-</span><span class="n">seller</span> <span class="n">on</span> <span class="n">my</span> <span class="n">hands</span> <span class="o">--</span> <span class="n">not</span> <span class="n">least</span> <span class="n">because</span> <span class="n">the</span> <span class="n">whole</span>
<span class="n">project</span> <span class="n">sits</span> <span class="n">publicly</span> <span class="n">on</span> <span class="n">GitHub</span> <span class="n">and</span> <span class="n">can</span> <span class="n">be</span> <span class="n">read</span> <span class="n">freely</span> <span class="n">online</span> <span class="o">--</span>
<span class="n">self</span><span class="o">-</span><span class="n">publishing</span> <span class="n">and</span> <span class="n">print</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">demand</span> <span class="n">were</span> <span class="n">attractive</span><span class="p">.</span>

<span class="n">The</span> <span class="n">biggest</span> <span class="n">print</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">demand</span> <span class="n">shop</span> <span class="n">is</span> <span class="n">also</span> <span class="n">the</span> <span class="n">biggest</span> <span class="n">shop</span> <span class="n">of</span> <span class="n">any</span> <span class="nl">kind</span><span class="p">:</span>
<span class="n">Amazon</span><span class="p">.</span> <span class="p">[</span><span class="n">Kindle</span> <span class="n">Direct</span> <span class="n">Publishing</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//kdp.amazon.com/en_US)</span>
<span class="n">handles</span> <span class="n">both</span> <span class="n">e</span><span class="o">-</span><span class="n">books</span> <span class="n">and</span> <span class="n">print</span> <span class="n">books</span><span class="p">.</span> <span class="n">An</span> <span class="n">account</span> <span class="n">is</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">set</span> <span class="n">up</span> <span class="n">and</span>
<span class="n">gives</span> <span class="n">access</span> <span class="n">to</span> <span class="n">a</span> <span class="n">range</span> <span class="n">of</span> <span class="n">tools</span><span class="p">.</span>  <span class="n">A</span> <span class="n">book</span> <span class="n">needs</span> <span class="n">an</span> <span class="n">ISBN</span> <span class="n">number</span> <span class="o">--</span> <span class="n">a</span>
<span class="n">different</span> <span class="n">one</span> <span class="k">for</span> <span class="n">each</span> <span class="n">format</span> <span class="n">and</span> <span class="n">edition</span><span class="p">,</span> <span class="n">in</span> <span class="n">fact</span> <span class="o">--</span> <span class="n">and</span> <span class="n">Amazon</span> <span class="n">will</span>
<span class="n">allocate</span> <span class="n">one</span> <span class="k">for</span> <span class="n">you</span><span class="p">.</span>

<span class="n">All</span> <span class="k">this</span> <span class="s">"free"</span> <span class="n">help</span> <span class="n">comes</span> <span class="n">at</span> <span class="n">a</span> <span class="n">cost</span><span class="p">,</span> <span class="n">though</span><span class="p">.</span> <span class="n">Using</span> <span class="n">an</span> <span class="n">Amazon</span> <span class="n">ISBN</span><span class="p">,</span> <span class="n">or</span>
<span class="n">a</span> <span class="n">cover</span> <span class="n">with</span> <span class="n">Amazon</span> <span class="n">clip</span> <span class="n">art</span><span class="p">,</span> <span class="n">ties</span> <span class="n">you</span> <span class="n">strictly</span> <span class="n">to</span> <span class="n">Amazon</span> <span class="k">for</span>
<span class="n">distribution</span><span class="p">.</span>

<span class="n">Searching</span> <span class="n">online</span> <span class="n">turned</span> <span class="n">up</span>
<span class="p">[</span><span class="n">IngramSpark</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//www.ingramspark.com/), who are a print-on-demand</span>
<span class="n">and</span> <span class="n">e</span><span class="o">-</span><span class="n">book</span> <span class="n">distributor</span><span class="p">.</span> <span class="n">They</span> <span class="n">offer</span> <span class="n">a</span> <span class="n">broader</span> <span class="n">service</span> <span class="n">than</span> <span class="n">Amazon</span><span class="p">,</span> <span class="k">for</span>
<span class="n">example</span> <span class="n">advertising</span> <span class="n">to</span> <span class="n">bookshops</span> <span class="n">and</span> <span class="n">providing</span> <span class="n">order</span> <span class="n">fulfilment</span><span class="p">.</span>

<span class="n">The</span> <span class="n">prices</span> <span class="n">involved</span> <span class="n">are</span> <span class="n">pretty</span> <span class="n">similar</span><span class="p">.</span> <span class="n">Amazon</span> <span class="n">have</span> <span class="n">a</span> <span class="n">single</span> <span class="n">price</span>
<span class="n">point</span> <span class="k">for</span> <span class="n">their</span> <span class="n">sites</span><span class="p">,</span> <span class="n">taking</span> <span class="n">into</span> <span class="n">account</span> <span class="n">printing</span> <span class="n">and</span> <span class="n">their</span> <span class="n">cut</span><span class="p">.</span> <span class="n">I</span><span class="err">'</span><span class="n">d</span>
<span class="n">already</span> <span class="n">decided</span> <span class="n">to</span> <span class="n">aim</span> <span class="k">for</span> <span class="n">the</span> <span class="n">lowest</span> <span class="n">price</span> <span class="n">point</span> <span class="k">for</span> <span class="k">this</span> <span class="n">book</span> <span class="p">(</span><span class="n">not</span>
<span class="n">least</span> <span class="n">because</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span> <span class="n">available</span> <span class="k">for</span> <span class="n">free</span> <span class="n">online</span><span class="p">)</span> <span class="n">which</span>
<span class="n">worked</span> <span class="n">out</span> <span class="n">at</span> <span class="err"></span><span class="mf">16.99</span> <span class="k">for</span> <span class="n">a</span> <span class="n">royalty</span> <span class="n">of</span> <span class="err"></span><span class="mf">1.12</span> <span class="n">per</span> <span class="n">sale</span><span class="p">.</span> <span class="n">IngramSpark</span>
<span class="n">allow</span> <span class="n">different</span> <span class="n">prices</span> <span class="k">for</span> <span class="n">the</span> <span class="n">UK</span><span class="p">,</span> <span class="n">US</span><span class="p">,</span> <span class="n">Euro</span><span class="p">,</span> <span class="n">Australian</span><span class="p">,</span> <span class="n">and</span> <span class="n">world</span>
<span class="n">markets</span><span class="p">,</span> <span class="n">and</span> <span class="n">I</span> <span class="n">chose</span> <span class="n">the</span> <span class="n">same</span> <span class="n">price</span> <span class="n">in</span> <span class="n">pounds</span><span class="p">.</span> <span class="p">(</span><span class="n">Their</span> <span class="n">royalty</span> <span class="n">is</span>
<span class="err"></span><span class="mf">1.23</span><span class="p">.)</span>

<span class="n">As</span> <span class="n">far</span> <span class="n">as</span> <span class="n">ISBN</span><span class="err">'</span><span class="n">s</span> <span class="n">are</span> <span class="n">concerned</span><span class="p">,</span> <span class="n">there</span> <span class="n">are</span> <span class="n">national</span> <span class="n">agencies</span> <span class="n">that</span>
<span class="n">allocate</span> <span class="n">them</span> <span class="o">--</span> <span class="n">at</span> <span class="n">a</span> <span class="n">price</span><span class="p">.</span> <span class="n">But</span> <span class="n">the</span> <span class="n">renaissance</span> <span class="n">in</span> <span class="n">self</span><span class="o">-</span><span class="n">publishing</span>
<span class="n">has</span> <span class="n">meant</span> <span class="n">that</span> <span class="n">there</span> <span class="n">are</span> <span class="n">also</span> <span class="n">networks</span> <span class="n">of</span> <span class="n">people</span> <span class="n">working</span> <span class="n">to</span> <span class="n">help</span>
<span class="n">aspiring</span> <span class="n">authors</span><span class="p">.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">UK</span> <span class="n">I</span> <span class="n">discovered</span> <span class="n">the</span> <span class="p">[</span><span class="n">Independent</span> <span class="n">Publishing</span>
<span class="n">Network</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//bookisbn.org.uk/) who provide such services,</span>
<span class="n">dealing</span> <span class="n">with</span> <span class="n">generating</span> <span class="n">ISBNs</span> <span class="n">and</span> <span class="n">entering</span> <span class="n">the</span> <span class="n">book</span> <span class="n">details</span> <span class="n">into</span> <span class="n">the</span>
<span class="n">relevant</span> <span class="n">catalogues</span><span class="p">.</span> <span class="n">They</span> <span class="n">also</span> <span class="n">provide</span> <span class="o">--</span> <span class="n">and</span> <span class="n">here</span><span class="err">'</span><span class="n">s</span> <span class="n">another</span> <span class="n">little</span>
<span class="n">detail</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">forget</span> <span class="o">--</span> <span class="n">a</span> <span class="n">barcode</span> <span class="k">for</span> <span class="n">the</span> <span class="n">back</span> <span class="n">of</span> <span class="n">your</span> <span class="p">(</span><span class="n">print</span><span class="p">)</span>
<span class="n">book</span> <span class="n">to</span> <span class="n">help</span> <span class="n">acquisition</span><span class="p">,</span> <span class="n">sales</span><span class="p">,</span> <span class="n">and</span> <span class="n">stock</span> <span class="n">management</span> <span class="n">by</span> <span class="n">bookshops</span><span class="p">.</span>


<span class="cp"># Trim and cover design</span>

<span class="n">On</span><span class="o">-</span><span class="n">demand</span> <span class="n">print</span> <span class="n">services</span> <span class="n">are</span> <span class="n">quite</span> <span class="n">demanding</span> <span class="n">in</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">their</span>
<span class="n">requirements</span> <span class="n">on</span> <span class="n">PDF</span> <span class="n">files</span> <span class="k">for</span> <span class="n">cover</span> <span class="n">and</span> <span class="n">content</span><span class="p">.</span> <span class="n">The</span> <span class="n">exact</span>
<span class="n">requirements</span> <span class="n">depend</span> <span class="n">on</span> <span class="n">the</span> <span class="n">size</span> <span class="p">(</span><span class="n">or</span> <span class="s">"trim"</span><span class="p">)</span> <span class="n">you</span> <span class="n">choose</span> <span class="k">for</span> <span class="n">the</span> <span class="n">book</span><span class="p">.</span> <span class="n">I</span>
<span class="n">went</span> <span class="n">with</span> <span class="mi">7</span><span class="n">x10</span><span class="s">", which is ever so slightly larger than B5. The</span>
<span class="n">services</span> <span class="n">will</span> <span class="n">provide</span> <span class="k">template</span> <span class="n">covers</span> <span class="n">once</span> <span class="n">they</span> <span class="n">know</span> <span class="n">the</span> <span class="n">trim</span> <span class="n">size</span> <span class="n">and</span>
<span class="n">number</span> <span class="n">of</span> <span class="n">pages</span> <span class="p">(</span><span class="k">for</span> <span class="n">the</span> <span class="n">spine</span> <span class="n">width</span><span class="p">).</span>

<span class="n">At</span> <span class="k">this</span> <span class="n">point</span> <span class="n">things</span> <span class="n">got</span> <span class="n">more</span> <span class="n">in</span> <span class="n">need</span> <span class="n">of</span> <span class="n">creativity</span><span class="p">.</span> <span class="n">I</span> <span class="n">read</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span>
<span class="n">blog</span> <span class="n">posts</span> <span class="n">and</span> <span class="n">advertorials</span> <span class="n">on</span> <span class="n">the</span> <span class="n">subject</span> <span class="n">of</span> <span class="n">cover</span> <span class="n">design</span> <span class="p">(</span><span class="n">many</span> <span class="n">of</span>
<span class="n">which</span> <span class="n">warned</span> <span class="n">that</span> <span class="n">it</span> <span class="n">was</span> <span class="n">strictly</span> <span class="n">a</span> <span class="n">job</span> <span class="k">for</span> <span class="n">professionals</span><span class="p">),</span> <span class="n">and</span> <span class="n">they</span>
<span class="n">all</span> <span class="n">recommended</span> <span class="n">mining</span> <span class="n">the</span> <span class="n">genre</span> <span class="n">in</span> <span class="n">which</span> <span class="n">you</span><span class="err">'</span><span class="n">re</span> <span class="n">writing</span><span class="p">,</span> <span class="n">so</span> <span class="n">I</span> <span class="n">looked</span>
<span class="n">on</span> <span class="n">my</span> <span class="n">bookshelf</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="n">Book</span> <span class="n">cover</span> <span class="n">ideas</span><span class="p">](</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">20200722</span><span class="o">-</span><span class="n">book</span><span class="o">-</span><span class="n">cover</span><span class="o">-</span><span class="n">ideas</span><span class="p">.</span><span class="n">jpg</span><span class="p">)</span>

<span class="n">There</span><span class="err">'</span><span class="n">s</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">commonality</span> <span class="n">there</span><span class="p">,</span> <span class="n">with</span> <span class="n">an</span> <span class="n">obviously</span> <span class="n">network</span><span class="o">-</span><span class="n">y</span>
<span class="p">(</span><span class="s">"starfish"</span><span class="p">)</span> <span class="n">central</span> <span class="n">image</span><span class="p">.</span> <span class="n">These</span> <span class="n">are</span> <span class="n">very</span> <span class="n">visually</span> <span class="n">appealing</span><span class="p">,</span> <span class="n">of</span>
<span class="n">course</span><span class="p">,</span> <span class="n">but</span> <span class="n">unfortunately</span> <span class="n">they</span><span class="err">'</span><span class="n">re</span> <span class="n">almost</span> <span class="n">entirely</span> <span class="n">devoid</span> <span class="n">of</span>
<span class="n">information</span><span class="p">.</span> <span class="n">When</span> <span class="n">we</span><span class="err">'</span><span class="n">re</span> <span class="n">actually</span> <span class="n">doing</span> <span class="n">research</span> <span class="n">we</span> <span class="n">almost</span> <span class="o">*</span><span class="n">never</span><span class="o">*</span> <span class="n">draw</span>
<span class="n">these</span> <span class="n">sorts</span> <span class="n">of</span> <span class="n">diagrams</span> <span class="p">(</span><span class="n">other</span> <span class="n">than</span> <span class="k">for</span> <span class="n">their</span> <span class="n">fluff</span> <span class="n">value</span><span class="p">)</span><span class="o">:</span>
<span class="n">traditional</span> <span class="n">graph</span><span class="o">-</span><span class="n">plots</span> <span class="n">and</span> <span class="n">heatmaps</span> <span class="n">are</span> <span class="n">much</span> <span class="n">more</span> <span class="n">useful</span><span class="p">.</span> <span class="n">On</span> <span class="n">the</span>
<span class="n">other</span> <span class="n">hand</span> <span class="n">there</span><span class="err">'</span><span class="n">s</span> <span class="n">a</span> <span class="n">reason</span> <span class="n">why</span> <span class="n">people</span> <span class="n">go</span> <span class="k">for</span> <span class="n">eye</span><span class="o">-</span><span class="n">catching</span> <span class="n">front</span>
<span class="n">covers</span><span class="p">....</span> <span class="n">This</span> <span class="n">left</span> <span class="n">me</span> <span class="n">in</span> <span class="n">a</span> <span class="n">bit</span> <span class="n">of</span> <span class="n">a</span> <span class="n">quandary</span><span class="p">.</span>

<span class="n">After</span> <span class="n">several</span> <span class="nb">false</span> <span class="n">starts</span> <span class="n">I</span> <span class="n">realised</span> <span class="n">that</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">graphs</span> <span class="n">in</span> <span class="n">the</span>
<span class="n">book</span> <span class="n">was</span> <span class="n">actually</span> <span class="n">quite</span> <span class="n">graphically</span> <span class="n">strong</span> <span class="n">and</span> <span class="n">could</span> <span class="n">be</span> <span class="n">used</span> <span class="n">almost</span> <span class="n">as</span>
<span class="n">a</span> <span class="n">logo</span> <span class="n">once</span> <span class="n">the</span> <span class="n">axes</span> <span class="n">labels</span> <span class="n">and</span> <span class="n">title</span> <span class="n">were</span> <span class="n">removed</span><span class="p">.</span> <span class="n">And</span> <span class="n">I</span> <span class="n">also</span> <span class="n">had</span> <span class="n">a</span>
<span class="s">"starfish"</span> <span class="n">network</span> <span class="n">diagram</span><span class="p">,</span> <span class="n">which</span> <span class="p">(</span><span class="n">unusually</span><span class="p">)</span> <span class="n">I</span><span class="err">'</span><span class="n">d</span> <span class="n">drawn</span> <span class="k">for</span> <span class="n">good</span>
<span class="n">scientific</span> <span class="n">reasons</span><span class="p">.</span> <span class="n">An</span> <span class="n">hour</span> <span class="n">with</span> <span class="n">Photoshop</span> <span class="n">and</span> <span class="n">some</span> <span class="n">back</span><span class="o">-</span><span class="n">cover</span>
<span class="n">blurb</span><span class="o">-</span><span class="n">writing</span> <span class="n">resulted</span> <span class="n">in</span> <span class="n">a</span> <span class="n">design</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="n">Book</span> <span class="n">cover</span><span class="p">](</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">20200722</span><span class="o">-</span><span class="n">cover</span><span class="p">.</span><span class="n">png</span><span class="p">)</span>

<span class="n">There</span><span class="err">'</span><span class="n">s</span> <span class="n">absolutely</span> <span class="n">no</span> <span class="n">doubt</span> <span class="n">a</span> <span class="n">professional</span> <span class="n">would</span> <span class="k">do</span> <span class="n">better</span><span class="p">,</span> <span class="n">but</span> <span class="k">for</span> <span class="n">a</span>
<span class="n">science</span> <span class="n">book</span> <span class="n">I</span> <span class="n">think</span> <span class="n">there</span><span class="err">'</span><span class="n">s</span> <span class="n">less</span> <span class="n">reason</span> <span class="n">to</span> <span class="n">be</span> <span class="n">precious</span> <span class="n">about</span> <span class="n">these</span>
<span class="n">things</span><span class="p">.</span>


<span class="cp">## Print niggles</span>

<span class="n">So</span> <span class="n">far</span> <span class="n">so</span> <span class="n">good</span><span class="p">,</span> <span class="n">now</span> <span class="n">to</span> <span class="n">upload</span> <span class="n">the</span> <span class="n">documents</span><span class="p">.</span> <span class="n">There</span><span class="err">'</span><span class="n">s</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">scope</span>
<span class="k">for</span> <span class="n">error</span> <span class="n">in</span> <span class="n">measurements</span> <span class="n">and</span> <span class="n">the</span> <span class="n">like</span><span class="p">.</span> <span class="n">Fortunately</span> <span class="n">the</span>
<span class="n">print</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">demand</span> <span class="n">services</span> <span class="n">also</span> <span class="n">run</span> <span class="n">an</span> <span class="n">automated</span> <span class="n">workflow</span><span class="p">,</span> <span class="n">which</span> <span class="n">means</span>
<span class="n">that</span> <span class="n">the</span> <span class="n">files</span> <span class="n">are</span> <span class="n">checked</span> <span class="n">at</span> <span class="n">submission</span><span class="p">.</span>

<span class="n">I</span> <span class="n">encountered</span> <span class="n">two</span> <span class="n">problems</span><span class="p">.</span> <span class="n">Firstly</span><span class="p">,</span> <span class="n">any</span> <span class="n">figures</span> <span class="n">are</span> <span class="n">embedded</span> <span class="n">into</span> <span class="n">the</span>
<span class="n">PDF</span> <span class="n">with</span> <span class="n">a</span> <span class="n">given</span> <span class="n">resolution</span> <span class="n">and</span> <span class="n">colour</span> <span class="n">profile</span><span class="p">.</span> <span class="n">For</span> <span class="n">printing</span> <span class="n">they</span>
<span class="n">really</span> <span class="n">need</span> <span class="n">to</span> <span class="n">be</span> <span class="mi">300</span><span class="n">dpi</span> <span class="n">at</span> <span class="n">least</span><span class="p">,</span> <span class="n">and</span> <span class="n">the</span> <span class="n">upload</span> <span class="n">flagged</span> <span class="n">them</span> <span class="n">as</span> <span class="n">not</span>
<span class="n">meeting</span> <span class="k">this</span> <span class="n">standard</span><span class="p">.</span> <span class="n">It</span><span class="err">'</span><span class="n">s</span> <span class="n">of</span> <span class="n">course</span> <span class="n">not</span> <span class="n">obvious</span> <span class="n">from</span> <span class="n">a</span> <span class="n">previewer</span>
<span class="n">where</span> <span class="n">the</span> <span class="n">problem</span> <span class="n">is</span><span class="p">,</span> <span class="n">but</span> <span class="n">executing</span> <span class="err">`</span><span class="n">pdfimages</span> <span class="o">-</span><span class="n">list</span><span class="err">`</span> <span class="n">on</span> <span class="n">the</span> <span class="n">PDF</span> <span class="n">shows</span>
<span class="n">the</span> <span class="n">images</span> <span class="n">and</span> <span class="n">their</span> <span class="n">resolution</span><span class="p">.</span> <span class="n">Jupyter</span> <span class="n">uses</span> <span class="n">a</span> <span class="n">lower</span> <span class="n">resolution</span> <span class="n">by</span>
<span class="k">default</span><span class="p">,</span> <span class="n">so</span> <span class="n">I</span> <span class="n">added</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="n">line</span> <span class="n">to</span> <span class="n">the</span> <span class="n">cell</span> <span class="n">at</span> <span class="n">the</span> <span class="n">head</span> <span class="n">of</span>
<span class="n">each</span> <span class="nl">chapter</span><span class="p">:</span>

<span class="err">```</span><span class="p">{</span><span class="n">code</span><span class="p">}</span>
<span class="k">import</span> <span class="n">matplotlib</span>
<span class="nf">%matplotlib</span> <span class="kr">inline</span>
<span class="nf">%config</span> <span class="n">InlineBackend</span><span class="p">.</span><span class="n">figure_format</span> <span class="o">=</span> <span class="err">'</span><span class="n">png</span><span class="err">'</span>
<span class="n">matplotlib</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="err">'</span><span class="n">figure</span><span class="p">.</span><span class="n">dpi</span><span class="err">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>
</code></pre>

<p>This then triggered <em>another</em> warning, this time that the images were
<em>over</em> 300dpi! And that was true, because of course you may generate
an image at a larger size than it appears on the page, and <code>pdflatex</code>
doesn't automatically downsample. <code>pdfimages -list</code> again shows the
problem.</p>
<p><img alt="pdfimages" src="../../../../../images/posts/20200722-pdfimages.png"></p>
<p>I explored several ways around the issue, including re-encoding the
PDF using <code>ghostscript</code> -- which re-sampled the images but introduced
ICC colour profiles in the process, which trigger <em>yet another</em>
warning when the PDF is uploaded. In the end I let the printer
downsample from the too-large images and checked the print proof
carefully for any anomalies -- and there weren't any. Phew!</p>
<h3>No e-book (yet)</h3>
<p>Jupyter Book doesn't yet generate EPub, although again Sphinx does. So
I tried the same trick of driving Sphinx directly.</p>
<p>LaTeX-style maths isn't readable in e-books, and you can't use
<a href="https://www.mathjax.org/">MathJax</a> despite everything being in HTML
as e-readers don't typically support Javascript. Again, there's a
plug-in for that, in the form of <code>sphinx.ext.imgmath</code>. Include that
and all maths is rendered as images using LaTeX. (You need another
program, <code>dvipng</code>, to do the conversion.)</p>
<p>However, try as I might, I couldn't get Sphinx to render the images in
Jupyter notebook cells. This is very strange, since the Sphinx HTML
renderer handles them just fine. I still haven't sorted this out,
despite an extensive foray into how Sphinx (and Python <code>docutils</code>, and
the <code>MyST-NB</code> notebook parser) work: I suspect there's a single
configuration incantation needed.</p>
<h3>Costs</h3>
<p>A self-publisher takes on all the costs that a publisher would
normally absorb. In my case these have been roughly:</p>
<ul>
<li>40 for an ISBN number, barcode, and <a href="https://nielsenbook.co.uk/">Nielsen</a> registration</li>
<li>45 to upload a manuscript to IngramSpark</li>
<li>65 to be included in their advertising material and catalogue</li>
<li>60 for library deposits (see below)</li>
</ul>
<p>Call it 200 -- or, to put it another way, needing about 130 royalty
payments to break even. To have a hope of that happening will require
some marketing, which won't be free.</p>
<p>One of the costs above need explaining. Any book published in the UK
<a href="https://bookisbn.org.uk/legal-deposit/">must by law have a copy deposited (at publisher's expense) with the
British Library</a> -- and on
request with the five other deposit libraries around the UK. (This
includes e-books.) Fortunately you can get author copies from
IngramSpark at just the print cost.</p>
<p>This shines an interesting light on the economics of
self-publishing. I've taken several steps to <em>minimise</em> my royalties,
not least by making the project open source, which then in turn pretty
much mandated a minimum price point for the print book. A
traditional, closed-source project could freely try to charge
more. And obviously the fixed costs of e-books are essentially minimal
compared to print (although you still need to buy an ISBN).</p>
<h3>Psychology</h3>
<p>Not having a publisher is a double-edged sword. On the one hand, it
frees you to write (or not) as you see fit; on the other, it's hard to
actually bring things to an end when there's always something more you
could add. For this book the scope was quite clearly delineated form
the start, and the end to the content was equally easy to decide.</p>
<p>I never found it hard to do writing, although I did sometimes struggle
with exactly <em>what</em> to write -- or rather, how to put something. I'm
much more used to writing for an academic audience, but actually the
effort of simplifying and re-writing to make the text simpler, more
easily grasped, and (hopefully) more memorable and better crafted are
things I'll try to take forward into <em>all</em> my writing. There's no
reason for scientific prose to be hard to digest, and in fact the
easier concepts and explained the more likely they are to be picked up
and used (and cited!). </p>
<p>But I still found it hard to let go! The hardest thing was pushing the
button to "approve" the printed proof ahead of distribution. I must
have uploaded 20 versions, each with subtle differences in layout and
another corrected typo. In the end I realised I was just trying to
perfect things in order not to commit the book to the public, and just
forced myself to go through with it. The relief was palpable.</p>
<h3>Conclusions</h3>
<p>I'm very happy with the way things turned
out both <a href="https://simoninireland.github.io/introduction-to-epidemics/index.html">online</a>
and <a href="https://www.amazon.co.uk/dp/1838535659/">in print</a>. Jupyter Book is an
excellent project and does a fantastic job of rendering online
books. It's not working yet for print or e-books, but that's surely
only a matter of time given the Sphinx does (almost) everything
needed.</p>
<p>Of course what I've described is something of a hacker toolchain: you
need a certain attitude to write a lot of markdown with any degree of
comfort. But then again this is technical writing, and if you already
have comfort with these sorts of tools, then it's immensely reassuring
to know that you can transfer those skills from a coding to a writing
project. And skills like version control are equally valuable in both
domains.</p>
<p>It's also a slightly flaky toolchain, especially for print media. I
needed to fix up citations and index terms using shell scripts, which
is clearly undesirable. But these are only small (if fiddly) issues,
and ones that could easily be retrofitted into the underlying
codebases. I'll be looking to this in the near future, other
commitments permitting.</p>
<p>Is there an easier way? If you didn't need executable content then
writing straight into LaTeX would be an option, and then going from
there to HTML. Personally I think I'd stick with markdown and Jupyter
Book even if I didn't have notebooks: start with portable sources and
then refine to presentations using the best tools for the particular
media. </p>
<p>One final point needs making strongly. With the single exceptions of
Photoshop for assembling the cover, Amazon for creating the cover
template, and some help with ISBNs and barcodes, all the tools I used
are open source. (And you could easily replace the former with
<a href="https://www.gimp.org/">Gimp</a>.) It's amazing that the powers of open
source have moved from the coding domain and into the domain of book
publishing, and have wrought the same changes.</p>
<h3>Resources</h3>
<p>You can read the book for free online
<a href="https://simoninireland.github.io/introduction-to-epidemics/index.html">here</a>,
or buy a print copy from <a href="https://www.amazon.co.uk/dp/1838535659/">Amazon</a>.</p>
<p>All the files mentioned in the text are available from the project's
<a href="https://github.com/simoninireland/introduction-to-epidemics">Github
repo</a>. Some
of the specific files referred to in the text are:</p>
<ul>
<li>
<a href="https://github.com/simoninireland/introduction-to-epidemics/blob/master/Makefile"><code>Makefile</code></a>
  -- looks complicated, but all it really does is move files around before
  building, plus running a couple of <code>sed</code> scripts for patching.</li>
<li>The <a href="https://www.latextemplates.com/template/tufte-style-book"><code>tufte-book</code></a>
  class file</li>
<li>
<a href="https://github.com/simoninireland/introduction-to-epidemics/blob/master/latex/conf.py"><code>latex/conf.py</code></a>
  -- LaTeX driver for Sphinx, importing the necessary extensions</li>
<li>
<a href="https://github.com/simoninireland/introduction-to-epidemics/blob/master/latex/style.tex"><code>latex/style.tex</code></a>
  -- the LaTeX preamble, re-defining the <code>sphinxShadowBox</code> environment
  to used the Tufte class' <code>\marginnote</code> command, defining the
  <code>\backoftitlepage</code> command to put in the copyright and imprint
  information, and the <code>\forprint</code> command to set things up generating
  a print PDF by disabling hyperlinks</li>
</ul>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../../categories/essay/" rel="tag">essay</a></li>
            <li><a class="tag p-category" href="../../../../../categories/experience/" rel="tag">experience</a></li>
            <li><a class="tag p-category" href="../../../../../categories/self-publishing/" rel="tag">self-publishing</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../../../goodreads/the-electric-kool-aid-acid-test/" rel="prev" title="The Electric Kool-Aid Acid Test">Previous post</a>
            </li>
            <li class="next">
                <a href="../em-book-published/" rel="next" title='"Epidemic modelling" published'>Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License CC-BY-NC-SA-4.0" style="border-width:0" src="../../../../../images/cc-by-nc-sa-4.0.png"></a>

            
        </footer>
</div>
</div>

        <script src="../../../../../assets/js/all-nocdn.js"></script><script src="https://polyfill.io/v3/polyfill.js?features=Intl.RelativeTimeFormat.%7Elocale.en"></script><script src="../../../../../assets/js/luxon.min.js"></script><!-- fancy dates --><script>
        luxon.Settings.defaultLocale = "en";
        fancydates(2, {"preset": false, "format": "yyyy-MM-dd HH:mm"});
        </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
